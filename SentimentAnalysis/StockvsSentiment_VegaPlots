{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>created_utc</th>\n",
       "      <th>open</th>\n",
       "      <th>high</th>\n",
       "      <th>low</th>\n",
       "      <th>close</th>\n",
       "      <th>volume</th>\n",
       "      <th>movement</th>\n",
       "      <th>positive_percent</th>\n",
       "      <th>negative_percent</th>\n",
       "      <th>litigious_percent</th>\n",
       "      <th>superfluous_percent</th>\n",
       "      <th>constraining_percent</th>\n",
       "      <th>uncertainty_percent</th>\n",
       "      <th>lead_movement</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2021-03-08T15:00:00Z</td>\n",
       "      <td>154.48</td>\n",
       "      <td>167.00</td>\n",
       "      <td>149.740</td>\n",
       "      <td>164.525</td>\n",
       "      <td>40037</td>\n",
       "      <td>1</td>\n",
       "      <td>0.379620</td>\n",
       "      <td>0.342304</td>\n",
       "      <td>0.043416</td>\n",
       "      <td>0.022964</td>\n",
       "      <td>0.002870</td>\n",
       "      <td>0.208827</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2021-03-08T16:00:00Z</td>\n",
       "      <td>164.83</td>\n",
       "      <td>196.67</td>\n",
       "      <td>164.830</td>\n",
       "      <td>178.970</td>\n",
       "      <td>131298</td>\n",
       "      <td>1</td>\n",
       "      <td>0.397271</td>\n",
       "      <td>0.379833</td>\n",
       "      <td>0.015163</td>\n",
       "      <td>0.017437</td>\n",
       "      <td>0.004549</td>\n",
       "      <td>0.185747</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2021-03-08T17:00:00Z</td>\n",
       "      <td>178.57</td>\n",
       "      <td>210.44</td>\n",
       "      <td>178.270</td>\n",
       "      <td>197.200</td>\n",
       "      <td>81727</td>\n",
       "      <td>1</td>\n",
       "      <td>0.344928</td>\n",
       "      <td>0.410628</td>\n",
       "      <td>0.021256</td>\n",
       "      <td>0.028019</td>\n",
       "      <td>0.001932</td>\n",
       "      <td>0.193237</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2021-03-08T18:00:00Z</td>\n",
       "      <td>197.20</td>\n",
       "      <td>200.46</td>\n",
       "      <td>172.385</td>\n",
       "      <td>175.070</td>\n",
       "      <td>30325</td>\n",
       "      <td>0</td>\n",
       "      <td>0.349057</td>\n",
       "      <td>0.412736</td>\n",
       "      <td>0.022406</td>\n",
       "      <td>0.027123</td>\n",
       "      <td>0.003538</td>\n",
       "      <td>0.185142</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2021-03-08T19:00:00Z</td>\n",
       "      <td>173.88</td>\n",
       "      <td>188.87</td>\n",
       "      <td>168.300</td>\n",
       "      <td>187.550</td>\n",
       "      <td>19325</td>\n",
       "      <td>1</td>\n",
       "      <td>0.389262</td>\n",
       "      <td>0.350336</td>\n",
       "      <td>0.028188</td>\n",
       "      <td>0.024161</td>\n",
       "      <td>0.002685</td>\n",
       "      <td>0.205369</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "            created_utc    open    high      low    close  volume  movement  \\\n",
       "0  2021-03-08T15:00:00Z  154.48  167.00  149.740  164.525   40037         1   \n",
       "1  2021-03-08T16:00:00Z  164.83  196.67  164.830  178.970  131298         1   \n",
       "2  2021-03-08T17:00:00Z  178.57  210.44  178.270  197.200   81727         1   \n",
       "3  2021-03-08T18:00:00Z  197.20  200.46  172.385  175.070   30325         0   \n",
       "4  2021-03-08T19:00:00Z  173.88  188.87  168.300  187.550   19325         1   \n",
       "\n",
       "   positive_percent  negative_percent  litigious_percent  superfluous_percent  \\\n",
       "0          0.379620          0.342304           0.043416             0.022964   \n",
       "1          0.397271          0.379833           0.015163             0.017437   \n",
       "2          0.344928          0.410628           0.021256             0.028019   \n",
       "3          0.349057          0.412736           0.022406             0.027123   \n",
       "4          0.389262          0.350336           0.028188             0.024161   \n",
       "\n",
       "   constraining_percent  uncertainty_percent  lead_movement  \n",
       "0              0.002870             0.208827            1.0  \n",
       "1              0.004549             0.185747            1.0  \n",
       "2              0.001932             0.193237            0.0  \n",
       "3              0.003538             0.185142            1.0  \n",
       "4              0.002685             0.205369            1.0  "
      ]
     },
     "execution_count": 11,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "pip install pandas\n",
    "%pip install altair vega_datasets"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-315823014c7c4985aa48e11ab6306aac\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-315823014c7c4985aa48e11ab6306aac\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-315823014c7c4985aa48e11ab6306aac\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"layer\": [{\"mark\": \"rule\", \"encoding\": {\"color\": {\"condition\": {\"value\": \"#06982d\", \"test\": \"datum.open <= datum.close\"}, \"value\": \"#ae1325\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"low\", \"scale\": {\"zero\": false}, \"title\": \"Price\"}, \"y2\": {\"field\": \"high\"}}}, {\"mark\": \"bar\", \"encoding\": {\"color\": {\"condition\": {\"value\": \"#06982d\", \"test\": \"datum.open <= datum.close\"}, \"value\": \"#ae1325\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"open\"}, \"y2\": {\"field\": \"close\"}}}], \"data\": {\"name\": \"data-f54116fcfcc947b42f2bddf50d47c227\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-f54116fcfcc947b42f2bddf50d47c227\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"open\": 154.48, \"high\": 167.0, \"low\": 149.74, \"close\": 164.525, \"volume\": 40037, \"movement\": 1, \"positive_percent\": 0.3796196627197704, \"negative_percent\": 0.34230355220667386, \"litigious_percent\": 0.04341585934696807, \"superfluous_percent\": 0.022963760315751702, \"constraining_percent\": 0.002870470039468963, \"uncertainty_percent\": 0.20882669537136705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"open\": 164.83, \"high\": 196.67, \"low\": 164.83, \"close\": 178.97, \"volume\": 131298, \"movement\": 1, \"positive_percent\": 0.3972706595905989, \"negative_percent\": 0.3798332069749811, \"litigious_percent\": 0.015163002274450341, \"superfluous_percent\": 0.01743745261561789, \"constraining_percent\": 0.004548900682335102, \"uncertainty_percent\": 0.18574677786201668, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"open\": 178.57, \"high\": 210.44, \"low\": 178.27, \"close\": 197.2, \"volume\": 81727, \"movement\": 1, \"positive_percent\": 0.34492753623188405, \"negative_percent\": 0.4106280193236715, \"litigious_percent\": 0.021256038647343, \"superfluous_percent\": 0.028019323671497585, \"constraining_percent\": 0.0019323671497584538, \"uncertainty_percent\": 0.1932367149758454, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"open\": 197.2, \"high\": 200.46, \"low\": 172.385, \"close\": 175.07, \"volume\": 30325, \"movement\": 0, \"positive_percent\": 0.3490566037735849, \"negative_percent\": 0.41273584905660377, \"litigious_percent\": 0.02240566037735849, \"superfluous_percent\": 0.027122641509433963, \"constraining_percent\": 0.003537735849056604, \"uncertainty_percent\": 0.18514150943396224, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"open\": 173.88, \"high\": 188.87, \"low\": 168.3, \"close\": 187.55, \"volume\": 19325, \"movement\": 1, \"positive_percent\": 0.38926174496644295, \"negative_percent\": 0.3503355704697987, \"litigious_percent\": 0.02818791946308725, \"superfluous_percent\": 0.024161073825503355, \"constraining_percent\": 0.002684563758389261, \"uncertainty_percent\": 0.20536912751677847, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"open\": 187.96, \"high\": 198.75, \"low\": 182.5, \"close\": 192.67, \"volume\": 35534, \"movement\": 1, \"positive_percent\": 0.3655778894472362, \"negative_percent\": 0.3944723618090452, \"litigious_percent\": 0.027638190954773868, \"superfluous_percent\": 0.016331658291457288, \"constraining_percent\": 0.002512562814070352, \"uncertainty_percent\": 0.1934673366834171, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"open\": 226.03, \"high\": 243.31, \"low\": 221.79, \"close\": 229.22, \"volume\": 80240, \"movement\": 1, \"positive_percent\": 0.3494802902529908, \"negative_percent\": 0.37585801137477937, \"litigious_percent\": 0.033732104334183166, \"superfluous_percent\": 0.021474798980192198, \"constraining_percent\": 0.003432045499117474, \"uncertainty_percent\": 0.21602274955873704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"open\": 230.04, \"high\": 240.56, \"low\": 227.8, \"close\": 240.175, \"volume\": 40036, \"movement\": 1, \"positive_percent\": 0.3752598752598753, \"negative_percent\": 0.3627858627858628, \"litigious_percent\": 0.028066528066528068, \"superfluous_percent\": 0.02494802494802495, \"constraining_percent\": 0.002079002079002079, \"uncertainty_percent\": 0.20686070686070687, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"open\": 240.99, \"high\": 246.13, \"low\": 234.65, \"close\": 238.01, \"volume\": 43558, \"movement\": 0, \"positive_percent\": 0.31088560885608857, \"negative_percent\": 0.4326568265682657, \"litigious_percent\": 0.027675276752767528, \"superfluous_percent\": 0.022140221402214017, \"constraining_percent\": 0.003690036900369004, \"uncertainty_percent\": 0.2029520295202952, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"open\": 238.0, \"high\": 245.57, \"low\": 230.38, \"close\": 235.35, \"volume\": 38558, \"movement\": 0, \"positive_percent\": 0.34309623430962344, \"negative_percent\": 0.3877266387726639, \"litigious_percent\": 0.03486750348675035, \"superfluous_percent\": 0.016736401673640166, \"constraining_percent\": 0.0013947001394700141, \"uncertainty_percent\": 0.21617852161785214, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"open\": 235.52, \"high\": 239.49, \"low\": 231.31, \"close\": 236.03, \"volume\": 40700, \"movement\": 1, \"positive_percent\": 0.3361884368308351, \"negative_percent\": 0.36616702355460384, \"litigious_percent\": 0.04925053533190578, \"superfluous_percent\": 0.02034261241970021, \"constraining_percent\": 0.004282655246252678, \"uncertainty_percent\": 0.22376873661670235, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"open\": 235.69, \"high\": 249.65, \"low\": 233.65, \"close\": 246.63, \"volume\": 63252, \"movement\": 1, \"positive_percent\": 0.3763188745603752, \"negative_percent\": 0.3716295427901524, \"litigious_percent\": 0.03048065650644783, \"superfluous_percent\": 0.026963657678780773, \"constraining_percent\": 0.004689331770222743, \"uncertainty_percent\": 0.1899179366940211, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"open\": 281.66, \"high\": 303.38, \"low\": 281.21, \"close\": 293.63, \"volume\": 97304, \"movement\": 1, \"positive_percent\": 0.34204980095230664, \"negative_percent\": 0.3837327296854266, \"litigious_percent\": 0.03013035672468972, \"superfluous_percent\": 0.02326125985481227, \"constraining_percent\": 0.0029662009210834443, \"uncertainty_percent\": 0.21785965186168135, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"open\": 293.17, \"high\": 336.0, \"low\": 290.01, \"close\": 329.47, \"volume\": 146017, \"movement\": 1, \"positive_percent\": 0.27059114518921595, \"negative_percent\": 0.5206529804600544, \"litigious_percent\": 0.02572347266881029, \"superfluous_percent\": 0.0175612169181301, \"constraining_percent\": 0.0017313875834776154, \"uncertainty_percent\": 0.16373979718031165, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"open\": 331.32, \"high\": 347.5, \"low\": 174.535, \"close\": 265.99, \"volume\": 221303, \"movement\": 0, \"positive_percent\": 0.2446228850014339, \"negative_percent\": 0.5483223401204473, \"litigious_percent\": 0.01778032692859191, \"superfluous_percent\": 0.02007456266131345, \"constraining_percent\": 0.002581015199311729, \"uncertainty_percent\": 0.16661887008890164, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"open\": 267.37, \"high\": 284.825, \"low\": 220.48, \"close\": 266.27, \"volume\": 112477, \"movement\": 0, \"positive_percent\": 0.24408352668213454, \"negative_percent\": 0.5048723897911833, \"litigious_percent\": 0.02877030162412993, \"superfluous_percent\": 0.031090487238979118, \"constraining_percent\": 0.0037122969837587007, \"uncertainty_percent\": 0.1874709976798144, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"open\": 268.0, \"high\": 273.87, \"low\": 226.04, \"close\": 261.37, \"volume\": 64341, \"movement\": 0, \"positive_percent\": 0.27841945288753805, \"negative_percent\": 0.4790273556231003, \"litigious_percent\": 0.01702127659574468, \"superfluous_percent\": 0.03221884498480243, \"constraining_percent\": 0.0024316109422492407, \"uncertainty_percent\": 0.19088145896656536, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"open\": 257.42, \"high\": 276.84, \"low\": 246.2, \"close\": 263.01, \"volume\": 39312, \"movement\": 1, \"positive_percent\": 0.3061674008810573, \"negative_percent\": 0.4353891336270191, \"litigious_percent\": 0.03303964757709251, \"superfluous_percent\": 0.02569750367107195, \"constraining_percent\": 0.0007342143906020558, \"uncertainty_percent\": 0.19897209985315711, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"open\": 260.58, \"high\": 281.26, \"low\": 257.55, \"close\": 274.44, \"volume\": 66627, \"movement\": 1, \"positive_percent\": 0.28466100336592404, \"negative_percent\": 0.4370091360794999, \"litigious_percent\": 0.030213175188331463, \"superfluous_percent\": 0.02869049527167815, \"constraining_percent\": 0.003686488219265908, \"uncertainty_percent\": 0.21573970187530053, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"open\": 274.445, \"high\": 274.445, \"low\": 253.21, \"close\": 265.26, \"volume\": 34212, \"movement\": 0, \"positive_percent\": 0.33785310734463275, \"negative_percent\": 0.37175141242937854, \"litigious_percent\": 0.0384180790960452, \"superfluous_percent\": 0.02598870056497175, \"constraining_percent\": 0.004519774011299435, \"uncertainty_percent\": 0.2214689265536723, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"open\": 264.72, \"high\": 264.72, \"low\": 248.02, \"close\": 256.45, \"volume\": 31394, \"movement\": 0, \"positive_percent\": 0.3113425925925926, \"negative_percent\": 0.4131944444444444, \"litigious_percent\": 0.02430555555555556, \"superfluous_percent\": 0.032407407407407406, \"constraining_percent\": 0.0046296296296296285, \"uncertainty_percent\": 0.2141203703703704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"open\": 256.71, \"high\": 263.87, \"low\": 253.06, \"close\": 261.01, \"volume\": 21075, \"movement\": 1, \"positive_percent\": 0.3490460157126824, \"negative_percent\": 0.3771043771043771, \"litigious_percent\": 0.022446689113355782, \"superfluous_percent\": 0.014590347923681257, \"constraining_percent\": 0.0033670033670033673, \"uncertainty_percent\": 0.2334455667789001, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"open\": 261.61, \"high\": 268.01, \"low\": 257.01, \"close\": 262.255, \"volume\": 19856, \"movement\": 1, \"positive_percent\": 0.34294871794871795, \"negative_percent\": 0.3701923076923077, \"litigious_percent\": 0.049679487179487176, \"superfluous_percent\": 0.02564102564102564, \"constraining_percent\": 0.00641025641025641, \"uncertainty_percent\": 0.20512820512820512, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"open\": 262.4, \"high\": 269.38, \"low\": 251.98, \"close\": 255.37, \"volume\": 37514, \"movement\": 0, \"positive_percent\": 0.36890243902439024, \"negative_percent\": 0.3932926829268293, \"litigious_percent\": 0.027439024390243903, \"superfluous_percent\": 0.021341463414634148, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18902439024390244, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"open\": 279.0, \"high\": 294.94, \"low\": 277.45, \"close\": 282.72, \"volume\": 68433, \"movement\": 1, \"positive_percent\": 0.31770889198755764, \"negative_percent\": 0.3752011155207552, \"litigious_percent\": 0.041617505094926524, \"superfluous_percent\": 0.025421001823447392, \"constraining_percent\": 0.0033251099431513467, \"uncertainty_percent\": 0.236726375630162, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"open\": 282.74, \"high\": 285.88, \"low\": 273.485, \"close\": 276.84, \"volume\": 30555, \"movement\": 0, \"positive_percent\": 0.32061068702290074, \"negative_percent\": 0.3753180661577608, \"litigious_percent\": 0.04452926208651401, \"superfluous_percent\": 0.025445292620865142, \"constraining_percent\": 0.005089058524173028, \"uncertainty_percent\": 0.22900763358778625, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"open\": 276.05, \"high\": 280.25, \"low\": 272.5, \"close\": 275.49, \"volume\": 14154, \"movement\": 0, \"positive_percent\": 0.3503759398496241, \"negative_percent\": 0.3849624060150376, \"litigious_percent\": 0.03157894736842105, \"superfluous_percent\": 0.006015037593984964, \"constraining_percent\": 0.003007518796992481, \"uncertainty_percent\": 0.22406015037593985, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"open\": 275.36, \"high\": 276.92, \"low\": 264.735, \"close\": 275.38, \"volume\": 25372, \"movement\": 1, \"positive_percent\": 0.3463338533541342, \"negative_percent\": 0.374414976599064, \"litigious_percent\": 0.0358814352574103, \"superfluous_percent\": 0.0202808112324493, \"constraining_percent\": 0.0015600624024961, \"uncertainty_percent\": 0.22152886115444614, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"open\": 275.15, \"high\": 281.01, \"low\": 273.01, \"close\": 278.77, \"volume\": 19730, \"movement\": 1, \"positive_percent\": 0.31841652323580033, \"negative_percent\": 0.38726333907056804, \"litigious_percent\": 0.03270223752151463, \"superfluous_percent\": 0.02065404475043029, \"constraining_percent\": 0.0034423407917383822, \"uncertainty_percent\": 0.2375215146299484, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"open\": 278.71, \"high\": 279.11, \"low\": 262.43, \"close\": 264.24, \"volume\": 31802, \"movement\": 0, \"positive_percent\": 0.3306122448979592, \"negative_percent\": 0.35374149659863946, \"litigious_percent\": 0.05578231292517007, \"superfluous_percent\": 0.024489795918367342, \"constraining_percent\": 0.005442176870748299, \"uncertainty_percent\": 0.22993197278911565, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"open\": 277.09, \"high\": 278.25, \"low\": 265.78, \"close\": 269.7, \"volume\": 34806, \"movement\": 0, \"positive_percent\": 0.3372531367805098, \"negative_percent\": 0.3648793113149159, \"litigious_percent\": 0.04056715242221347, \"superfluous_percent\": 0.02211219265177516, \"constraining_percent\": 0.0031508467900748325, \"uncertainty_percent\": 0.2320373600405109, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"open\": 269.7, \"high\": 271.1, \"low\": 226.19, \"close\": 251.6, \"volume\": 48179, \"movement\": 0, \"positive_percent\": 0.26752618855761484, \"negative_percent\": 0.467365028203062, \"litigious_percent\": 0.0257856567284448, \"superfluous_percent\": 0.029008863819500408, \"constraining_percent\": 0.0040290088638195, \"uncertainty_percent\": 0.2062852538275584, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"open\": 251.04, \"high\": 253.88, \"low\": 237.55, \"close\": 244.44, \"volume\": 11034, \"movement\": 0, \"positive_percent\": 0.3083333333333333, \"negative_percent\": 0.4197916666666667, \"litigious_percent\": 0.035416666666666666, \"superfluous_percent\": 0.0125, \"constraining_percent\": 0.003125, \"uncertainty_percent\": 0.22083333333333333, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"open\": 247.27, \"high\": 254.39, \"low\": 245.1, \"close\": 247.0, \"volume\": 7150, \"movement\": 0, \"positive_percent\": 0.35257082896117525, \"negative_percent\": 0.4018887722980063, \"litigious_percent\": 0.01888772298006296, \"superfluous_percent\": 0.02098635886673662, \"constraining_percent\": 0.002098635886673662, \"uncertainty_percent\": 0.20356768100734526, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"open\": 245.01, \"high\": 246.0, \"low\": 229.27, \"close\": 230.01, \"volume\": 8476, \"movement\": 0, \"positive_percent\": 0.2917115177610334, \"negative_percent\": 0.4208826695371367, \"litigious_percent\": 0.03444564047362755, \"superfluous_percent\": 0.03444564047362755, \"constraining_percent\": 0.005382131324004306, \"uncertainty_percent\": 0.2131324004305705, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"open\": 230.13, \"high\": 236.09, \"low\": 206.01, \"close\": 220.22, \"volume\": 34534, \"movement\": 0, \"positive_percent\": 0.2867647058823529, \"negative_percent\": 0.4506302521008403, \"litigious_percent\": 0.030462184873949583, \"superfluous_percent\": 0.018907563025210083, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21323529411764705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"open\": 190.1, \"high\": 195.1, \"low\": 172.36, \"close\": 195.1, \"volume\": 39781, \"movement\": 1, \"positive_percent\": 0.31089869925108393, \"negative_percent\": 0.42037839968466695, \"litigious_percent\": 0.026704769412692158, \"superfluous_percent\": 0.020496649586125345, \"constraining_percent\": 0.002660622782814348, \"uncertainty_percent\": 0.21886085928261725, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"open\": 194.645, \"high\": 211.47, \"low\": 192.24, \"close\": 194.695, \"volume\": 28161, \"movement\": 1, \"positive_percent\": 0.3324287652645861, \"negative_percent\": 0.4070556309362279, \"litigious_percent\": 0.033921302578018994, \"superfluous_percent\": 0.01492537313432836, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21166892808683851, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"open\": 194.69, \"high\": 204.83, \"low\": 191.45, \"close\": 204.83, \"volume\": 12001, \"movement\": 1, \"positive_percent\": 0.25910364145658266, \"negative_percent\": 0.4201680672268908, \"litigious_percent\": 0.030812324929971987, \"superfluous_percent\": 0.02100840336134454, \"constraining_percent\": 0.0070028011204481795, \"uncertainty_percent\": 0.2619047619047619, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"open\": 204.21, \"high\": 219.96, \"low\": 200.03, \"close\": 214.31, \"volume\": 25041, \"movement\": 1, \"positive_percent\": 0.34508076358296624, \"negative_percent\": 0.3847283406754772, \"litigious_percent\": 0.041116005873715125, \"superfluous_percent\": 0.024963289280469897, \"constraining_percent\": 0.005873715124816446, \"uncertainty_percent\": 0.19823788546255505, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"open\": 214.64, \"high\": 220.63, \"low\": 204.22, \"close\": 204.56, \"volume\": 15119, \"movement\": 0, \"positive_percent\": 0.297979797979798, \"negative_percent\": 0.43265993265993263, \"litigious_percent\": 0.03872053872053872, \"superfluous_percent\": 0.006734006734006735, \"constraining_percent\": 0.005050505050505051, \"uncertainty_percent\": 0.21885521885521889, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"open\": 204.56, \"high\": 215.1, \"low\": 204.56, \"close\": 207.14, \"volume\": 12077, \"movement\": 1, \"positive_percent\": 0.32015065913371, \"negative_percent\": 0.3879472693032015, \"litigious_percent\": 0.032015065913371, \"superfluous_percent\": 0.02259887005649717, \"constraining_percent\": 0.003766478342749529, \"uncertainty_percent\": 0.2335216572504708, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"open\": 222.96, \"high\": 224.85, \"low\": 210.865, \"close\": 219.0, \"volume\": 30832, \"movement\": 0, \"positive_percent\": 0.310099573257468, \"negative_percent\": 0.4041251778093883, \"litigious_percent\": 0.030156472261735418, \"superfluous_percent\": 0.02432432432432433, \"constraining_percent\": 0.004836415362731153, \"uncertainty_percent\": 0.2264580369843528, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"open\": 219.0, \"high\": 221.15, \"low\": 213.5, \"close\": 218.93, \"volume\": 10413, \"movement\": 0, \"positive_percent\": 0.28771929824561404, \"negative_percent\": 0.4263157894736842, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.014035087719298246, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.2456140350877193, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"open\": 218.59, \"high\": 225.06, \"low\": 218.155, \"close\": 219.9, \"volume\": 5605, \"movement\": 1, \"positive_percent\": 0.3479212253829322, \"negative_percent\": 0.4135667396061269, \"litigious_percent\": 0.0262582056892779, \"superfluous_percent\": 0.01312910284463895, \"constraining_percent\": 0.002188183807439825, \"uncertainty_percent\": 0.19693654266958424, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"open\": 219.02, \"high\": 221.28, \"low\": 216.84, \"close\": 220.07, \"volume\": 5219, \"movement\": 1, \"positive_percent\": 0.3508771929824561, \"negative_percent\": 0.3859649122807017, \"litigious_percent\": 0.017543859649122806, \"superfluous_percent\": 0.02631578947368421, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21929824561403508, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"open\": 219.69, \"high\": 223.0, \"low\": 213.0, \"close\": 215.25, \"volume\": 10146, \"movement\": 0, \"positive_percent\": 0.3333333333333333, \"negative_percent\": 0.42105263157894735, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.03508771929824561, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18421052631578946, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"open\": 216.015, \"high\": 216.05, \"low\": 204.09, \"close\": 209.89, \"volume\": 18210, \"movement\": 0, \"positive_percent\": 0.4368932038834951, \"negative_percent\": 0.2815533980582524, \"litigious_percent\": 0.029126213592233014, \"superfluous_percent\": 0.03883495145631068, \"constraining_percent\": 0.019417475728155338, \"uncertainty_percent\": 0.1941747572815534, \"lead_movement\": null}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.LayerChart(...)"
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import altair as alt\n",
    "source = pd.read_csv(\"~/Desktop/Uni/BI/2. semester/Data Science Project/PredictStockusingRedditandTwitter/PreProcessedData/GME_merged.csv\")\n",
    "\n",
    "open_close_color = alt.condition(\"datum.open <= datum.close\",\n",
    "                                 alt.value(\"#06982d\"),\n",
    "                                 alt.value(\"#ae1325\"))\n",
    "\n",
    "base = alt.Chart(source).encode(\n",
    "    alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "         axis = alt.Axis(\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "         )\n",
    "    ),\n",
    "    color=open_close_color\n",
    ")\n",
    "\n",
    "\n",
    "rule = base.mark_rule().encode(\n",
    "    alt.Y(\n",
    "        'low:Q',\n",
    "        title= 'Price',\n",
    "        scale=alt.Scale(zero=False),\n",
    "    ),\n",
    "    alt.Y2('high:Q')\n",
    ")\n",
    "\n",
    "bar = base.mark_bar().encode(\n",
    "    alt.Y('open:Q'),\n",
    "    alt.Y2('close:Q')\n",
    ")\n",
    "\n",
    "rule+bar"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-9a2f9df29c0848668869227997e98d51\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-9a2f9df29c0848668869227997e98d51\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-9a2f9df29c0848668869227997e98d51\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-f2409816d551eb0e29c68db4197e5b08\"}, \"mark\": \"line\", \"encoding\": {\"color\": {\"type\": \"nominal\", \"field\": \"Variables\"}, \"strokeDash\": {\"type\": \"nominal\", \"field\": \"Variables\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"Values\"}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-f2409816d551eb0e29c68db4197e5b08\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"close\", \"Values\": -2.1124993371541687}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"close\", \"Values\": -1.6962442564850746}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"close\", \"Values\": -1.1709185298947262}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"close\", \"Values\": -1.8086288057830648}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"close\", \"Values\": -1.448998248029496}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"close\", \"Values\": -1.301457506387007}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"close\", \"Values\": -0.24821256360712518}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.06747275371581918}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.00508492057988305}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.07156710535156652}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.05197185060217317}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.2534835910795434}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.6078614928758344}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"close\", \"Values\": 2.6406466843732623}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.8113720204152075}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"close\", \"Values\": 0.8194406547237804}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"close\", \"Values\": 0.6782395543237422}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7254986981311017}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.054871877227519}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7903359381107113}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.5364621229016618}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"close\", \"Values\": 0.6678655959270042}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"close\", \"Values\": 0.703742202049055}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.5053402477114497}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.2934729203524835}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"close\", \"Values\": 1.1240315998724353}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"close\", \"Values\": 1.0851292558846706}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"close\", \"Values\": 1.0819594352634447}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"close\", \"Values\": 1.1796475434993896}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7609430559866222}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"close\", \"Values\": 0.9182814250038077}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"close\", \"Values\": 0.3967018500567256}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.19037534416605667}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.26414571498730155}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.22544748823650693}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5075615235255639}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"close\", \"Values\": -1.2314332872090286}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"close\", \"Values\": -1.2431039904053582}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"close\", \"Values\": -0.9510482449860937}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"close\", \"Values\": -0.6778673405386719}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.9588287137836472}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.8844820119403619}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5427177158700633}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5447348744472066}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5167828198782193}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5118840061908714}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.6507797825027462}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.8052364964097278}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.3080074080347925}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.757874554956677}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4238166692356861}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5290533223282163}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.5537530768171326}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.9501277638386724}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5398517281675337}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.1968904461928098}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4438025851521987}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3771426724666145}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.20108512931263212}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.2238809327582183}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3504724513825006}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.47077888225426}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.132626323885716}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.1463728329382894}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.271260493845782}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5640545332911348}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.112183444168155}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.24351222734497038}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4321555393091087}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.528783466705642}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3733829548206085}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.0348598412402845}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.26989904092421}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.19594161726960954}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5626789560928337}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4596591701484616}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.25186379605677556}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.05896592925331201}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.22822090709295745}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.5488947702909557}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5088518804403341}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.6186196210676993}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.9324885057762341}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.058566832258698}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4434689530807786}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.10526319170484486}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.7635584100777033}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4277219416554931}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.7727302009757318}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.2076662487750836}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.463836104772548}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.0342373427643439}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5001161783800562}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5754542864836891}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.12831772280367976}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 2.7677257880215986}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.3377674224535485}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5216755391242294}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.14796548373001014}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.19380077710283605}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.1631091435070435}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.20334339584616914}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6081171779828584}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8923743721124068}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6269874971944394}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3500308580987487}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8188501716731507}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7000663022721972}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.43687942649011147}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.5404862330242852}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 3.1421634926519224}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.1973332773545855}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.6353264393179872}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6864022087652758}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.7216295739143861}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6974162159868128}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.20377305039070728}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5810146383548227}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7313193448335582}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.22899581302546118}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6224015453177404}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6198584239860975}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.41013980210739015}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.63949633601385}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3601054278959803}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.089046414016831}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8468518016737706}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.3817261648955461}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.34723132468908924}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.042071664442161885}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3709554594506877}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.0178242044146923}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35998998331857646}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.07028299011020143}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35541625055573844}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.4152296124177505}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6270550399473346}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.34523319112584494}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.006559541918229539}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.4891000336212831}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.21186870332243668}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3883400485139699}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3746513272558152}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -2.6587949676735683}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 1.4224339191569986}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.8460228541959132}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.1411445492460637}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.008149542028977}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.339223782573124}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.40281961155035795}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.3021601506744932}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.3532670537117648}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.3985293081896588}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.4335098064329245}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 2.0974235739851985}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.07398646870944633}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.11451120896677974}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.6243254909294675}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.5432353353288792}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.2718503868824127}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.6310467448207555}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.22205267792730407}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.10493028170856454}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.84426128794556}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.7883584869898351}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.0034030963959473}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 2.1470472480819836}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.4258603718243554}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 1.2143897160207877}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 1.551238900408911}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.05307028161191413}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.550807400620481}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.18301909705014627}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 2.8530580452863687}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 1.0928787375478275}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.6171316729596487}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.4970402348942453}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.4151252431026464}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.3847062104238857}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.07612337586183869}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.5108033086957388}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.3240477169473289}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.03561711361759298}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 1.1563733348033982}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.8792515972726556}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": 0.10352304143608938}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.11149000995219245}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.5558027971752816}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.5624644282342224}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -1.5705912618206086}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.5558027971752816}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"litigious_percent\", \"Values\": -0.230676395881147}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.038526592184344816}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.7899577108557307}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.7964385852423237}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.662011199653975}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.21802355516073602}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.9557344445572733}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.18469317068097052}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.336000455407011}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.08493541895052725}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.8950567629852274}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.35442653414493963}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.6381769118653743}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.08312666001396807}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.7714034088747557}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.3946115960899595}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 1.256856452974408}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 1.4260158142248975}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.4483596274255952}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.8970582332185704}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.492014825214196}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 1.4542844188246105}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -1.2167854726041645}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.4398926429761296}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.20468236221642205}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.40690745846421444}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.41054904801385983}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -2.5023653547520164}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.3636915473010804}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.30773771197479366}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.26730439668783756}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.08913738906012825}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.9447869082697296}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -1.5301629638032883}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.25791836712872923}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 1.759849036817153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.569564011450709}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.3313338325813071}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -1.166559690182187}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.25461353526953495}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.338288829582542}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -2.3945800703995297}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -0.016176451606952285}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.24249748659480447}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -1.3000280983130097}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": -1.4358501133319677}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 0.541050825609219}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 1.8561071998393825}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"superfluous_percent\", \"Values\": 2.417878854850327}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.19412900796853524}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.38320836426299093}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.5168124977691091}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.03539342760224727}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.25807603149082353}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.31723997349610533}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.0009613596291690321}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.46637381858585364}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.08778110839592579}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.7017562487515352}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.29162671858117833}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.431513080102912}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.16120002405870087}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.5859443473108152}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.2936940972418736}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.09543800986187877}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.34508535462821743}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.9289465162007994}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.08656045252214441}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.3731895316177118}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.41097706503840703}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.02333419570595225}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 1.023467304549684}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.03774446600416683}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.56900889782834}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.14698772758705336}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.6448758439474906}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.0025799586930226877}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.690472611068451}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.09768655017761382}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.20437882631204116}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.10657718734862125}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.45962028904551205}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.6698184730385445}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.26631111703685273}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 1.2272875859332686}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.8389107742299865}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.5557474852865275}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.11407501673294108}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 0.48210608801664484}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -0.42881808611644145}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": -1.1814975576909117}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"constraining_percent\", \"Values\": 5.497619306571862}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.09173455440168682}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.274999743955868}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.8910043568340144}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.3060307500659571}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.268997739211543}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.8791808033739744}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.2771939921847942}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.1925271922776764}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.3929179359722594}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.2851801409646328}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.6743165919824023}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.0611520539018309}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.3713686161107828}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -2.4032574232696384}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -2.255652617076424}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.186602145103405}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.0117540279340227}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.5969616562364489}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.2626826547565435}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.5564095332129168}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.1796624880095898}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.1704299889006406}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.2813493897608828}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.1069625473425797}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.3386310626569353}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.942905265015268}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.6892568428270232}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.5594822706573539}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.3793963859698544}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.9902944465333682}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.0982338030799368}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.22202961758192985}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.5238238304243745}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.36135460940367536}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.12901107482245153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.1342862461090579}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.42269869076277483}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.053981522419945346}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 2.629480910617308}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.6346034861830764}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.4224095163585772}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.1743310083141587}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.8121921068323511}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 1.7942851198466558}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.7013209528280824}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": 0.44512268860175513}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -1.3537605530581107}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"uncertainty_percent\", \"Values\": -0.8429126421983911}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "scaler = StandardScaler()\n",
    "\n",
    "\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12]] \n",
    "\n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "df.head()\n",
    "\n",
    "df_melt=pd.melt(df, id_vars=['created_utc'],\n",
    "        var_name='Variables', value_name='Values')\n",
    "\n",
    "alt.Chart(df_melt).mark_line().encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('Values:Q'),\n",
    "    color='Variables',\n",
    "    strokeDash='Variables',\n",
    ")\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-4b083ed3c08a41bca108c49150985385\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-4b083ed3c08a41bca108c49150985385\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-4b083ed3c08a41bca108c49150985385\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"vconcat\": [{\"layer\": [{\"layer\": [{\"mark\": \"rule\", \"encoding\": {\"color\": {\"condition\": {\"value\": \"#06982d\", \"test\": \"datum.open <= datum.close\"}, \"value\": \"#ae1325\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"low\", \"scale\": {\"zero\": false}, \"title\": \"Price\"}, \"y2\": {\"field\": \"high\"}}, \"selection\": {\"selector002\": {\"type\": \"interval\", \"bind\": \"scales\", \"encodings\": [\"x\", \"y\"]}}}, {\"mark\": \"bar\", \"encoding\": {\"color\": {\"condition\": {\"value\": \"#06982d\", \"test\": \"datum.open <= datum.close\"}, \"value\": \"#ae1325\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"open\"}, \"y2\": {\"field\": \"close\"}}}]}], \"data\": {\"name\": \"data-f54116fcfcc947b42f2bddf50d47c227\"}}, {\"layer\": [{\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 5}, \"encoding\": {\"color\": {\"value\": \"#636363\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"close\"}}, \"selection\": {\"selector001\": {\"type\": \"interval\", \"bind\": \"scales\", \"encodings\": [\"x\", \"y\"]}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#31a354\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"positive_percent\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#756bb1\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"negative_percent\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#de2d26\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"uncertainty_percent\"}}}], \"data\": {\"name\": \"data-053772705c2387e0addddb774cbbd457\"}}], \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-f54116fcfcc947b42f2bddf50d47c227\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"open\": 154.48, \"high\": 167.0, \"low\": 149.74, \"close\": 164.525, \"volume\": 40037, \"movement\": 1, \"positive_percent\": 0.3796196627197704, \"negative_percent\": 0.34230355220667386, \"litigious_percent\": 0.04341585934696807, \"superfluous_percent\": 0.022963760315751702, \"constraining_percent\": 0.002870470039468963, \"uncertainty_percent\": 0.20882669537136705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"open\": 164.83, \"high\": 196.67, \"low\": 164.83, \"close\": 178.97, \"volume\": 131298, \"movement\": 1, \"positive_percent\": 0.3972706595905989, \"negative_percent\": 0.3798332069749811, \"litigious_percent\": 0.015163002274450341, \"superfluous_percent\": 0.01743745261561789, \"constraining_percent\": 0.004548900682335102, \"uncertainty_percent\": 0.18574677786201668, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"open\": 178.57, \"high\": 210.44, \"low\": 178.27, \"close\": 197.2, \"volume\": 81727, \"movement\": 1, \"positive_percent\": 0.34492753623188405, \"negative_percent\": 0.4106280193236715, \"litigious_percent\": 0.021256038647343, \"superfluous_percent\": 0.028019323671497585, \"constraining_percent\": 0.0019323671497584538, \"uncertainty_percent\": 0.1932367149758454, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"open\": 197.2, \"high\": 200.46, \"low\": 172.385, \"close\": 175.07, \"volume\": 30325, \"movement\": 0, \"positive_percent\": 0.3490566037735849, \"negative_percent\": 0.41273584905660377, \"litigious_percent\": 0.02240566037735849, \"superfluous_percent\": 0.027122641509433963, \"constraining_percent\": 0.003537735849056604, \"uncertainty_percent\": 0.18514150943396224, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"open\": 173.88, \"high\": 188.87, \"low\": 168.3, \"close\": 187.55, \"volume\": 19325, \"movement\": 1, \"positive_percent\": 0.38926174496644295, \"negative_percent\": 0.3503355704697987, \"litigious_percent\": 0.02818791946308725, \"superfluous_percent\": 0.024161073825503355, \"constraining_percent\": 0.002684563758389261, \"uncertainty_percent\": 0.20536912751677847, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"open\": 187.96, \"high\": 198.75, \"low\": 182.5, \"close\": 192.67, \"volume\": 35534, \"movement\": 1, \"positive_percent\": 0.3655778894472362, \"negative_percent\": 0.3944723618090452, \"litigious_percent\": 0.027638190954773868, \"superfluous_percent\": 0.016331658291457288, \"constraining_percent\": 0.002512562814070352, \"uncertainty_percent\": 0.1934673366834171, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"open\": 226.03, \"high\": 243.31, \"low\": 221.79, \"close\": 229.22, \"volume\": 80240, \"movement\": 1, \"positive_percent\": 0.3494802902529908, \"negative_percent\": 0.37585801137477937, \"litigious_percent\": 0.033732104334183166, \"superfluous_percent\": 0.021474798980192198, \"constraining_percent\": 0.003432045499117474, \"uncertainty_percent\": 0.21602274955873704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"open\": 230.04, \"high\": 240.56, \"low\": 227.8, \"close\": 240.175, \"volume\": 40036, \"movement\": 1, \"positive_percent\": 0.3752598752598753, \"negative_percent\": 0.3627858627858628, \"litigious_percent\": 0.028066528066528068, \"superfluous_percent\": 0.02494802494802495, \"constraining_percent\": 0.002079002079002079, \"uncertainty_percent\": 0.20686070686070687, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"open\": 240.99, \"high\": 246.13, \"low\": 234.65, \"close\": 238.01, \"volume\": 43558, \"movement\": 0, \"positive_percent\": 0.31088560885608857, \"negative_percent\": 0.4326568265682657, \"litigious_percent\": 0.027675276752767528, \"superfluous_percent\": 0.022140221402214017, \"constraining_percent\": 0.003690036900369004, \"uncertainty_percent\": 0.2029520295202952, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"open\": 238.0, \"high\": 245.57, \"low\": 230.38, \"close\": 235.35, \"volume\": 38558, \"movement\": 0, \"positive_percent\": 0.34309623430962344, \"negative_percent\": 0.3877266387726639, \"litigious_percent\": 0.03486750348675035, \"superfluous_percent\": 0.016736401673640166, \"constraining_percent\": 0.0013947001394700141, \"uncertainty_percent\": 0.21617852161785214, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"open\": 235.52, \"high\": 239.49, \"low\": 231.31, \"close\": 236.03, \"volume\": 40700, \"movement\": 1, \"positive_percent\": 0.3361884368308351, \"negative_percent\": 0.36616702355460384, \"litigious_percent\": 0.04925053533190578, \"superfluous_percent\": 0.02034261241970021, \"constraining_percent\": 0.004282655246252678, \"uncertainty_percent\": 0.22376873661670235, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"open\": 235.69, \"high\": 249.65, \"low\": 233.65, \"close\": 246.63, \"volume\": 63252, \"movement\": 1, \"positive_percent\": 0.3763188745603752, \"negative_percent\": 0.3716295427901524, \"litigious_percent\": 0.03048065650644783, \"superfluous_percent\": 0.026963657678780773, \"constraining_percent\": 0.004689331770222743, \"uncertainty_percent\": 0.1899179366940211, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"open\": 281.66, \"high\": 303.38, \"low\": 281.21, \"close\": 293.63, \"volume\": 97304, \"movement\": 1, \"positive_percent\": 0.34204980095230664, \"negative_percent\": 0.3837327296854266, \"litigious_percent\": 0.03013035672468972, \"superfluous_percent\": 0.02326125985481227, \"constraining_percent\": 0.0029662009210834443, \"uncertainty_percent\": 0.21785965186168135, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"open\": 293.17, \"high\": 336.0, \"low\": 290.01, \"close\": 329.47, \"volume\": 146017, \"movement\": 1, \"positive_percent\": 0.27059114518921595, \"negative_percent\": 0.5206529804600544, \"litigious_percent\": 0.02572347266881029, \"superfluous_percent\": 0.0175612169181301, \"constraining_percent\": 0.0017313875834776154, \"uncertainty_percent\": 0.16373979718031165, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"open\": 331.32, \"high\": 347.5, \"low\": 174.535, \"close\": 265.99, \"volume\": 221303, \"movement\": 0, \"positive_percent\": 0.2446228850014339, \"negative_percent\": 0.5483223401204473, \"litigious_percent\": 0.01778032692859191, \"superfluous_percent\": 0.02007456266131345, \"constraining_percent\": 0.002581015199311729, \"uncertainty_percent\": 0.16661887008890164, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"open\": 267.37, \"high\": 284.825, \"low\": 220.48, \"close\": 266.27, \"volume\": 112477, \"movement\": 0, \"positive_percent\": 0.24408352668213454, \"negative_percent\": 0.5048723897911833, \"litigious_percent\": 0.02877030162412993, \"superfluous_percent\": 0.031090487238979118, \"constraining_percent\": 0.0037122969837587007, \"uncertainty_percent\": 0.1874709976798144, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"open\": 268.0, \"high\": 273.87, \"low\": 226.04, \"close\": 261.37, \"volume\": 64341, \"movement\": 0, \"positive_percent\": 0.27841945288753805, \"negative_percent\": 0.4790273556231003, \"litigious_percent\": 0.01702127659574468, \"superfluous_percent\": 0.03221884498480243, \"constraining_percent\": 0.0024316109422492407, \"uncertainty_percent\": 0.19088145896656536, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"open\": 257.42, \"high\": 276.84, \"low\": 246.2, \"close\": 263.01, \"volume\": 39312, \"movement\": 1, \"positive_percent\": 0.3061674008810573, \"negative_percent\": 0.4353891336270191, \"litigious_percent\": 0.03303964757709251, \"superfluous_percent\": 0.02569750367107195, \"constraining_percent\": 0.0007342143906020558, \"uncertainty_percent\": 0.19897209985315711, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"open\": 260.58, \"high\": 281.26, \"low\": 257.55, \"close\": 274.44, \"volume\": 66627, \"movement\": 1, \"positive_percent\": 0.28466100336592404, \"negative_percent\": 0.4370091360794999, \"litigious_percent\": 0.030213175188331463, \"superfluous_percent\": 0.02869049527167815, \"constraining_percent\": 0.003686488219265908, \"uncertainty_percent\": 0.21573970187530053, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"open\": 274.445, \"high\": 274.445, \"low\": 253.21, \"close\": 265.26, \"volume\": 34212, \"movement\": 0, \"positive_percent\": 0.33785310734463275, \"negative_percent\": 0.37175141242937854, \"litigious_percent\": 0.0384180790960452, \"superfluous_percent\": 0.02598870056497175, \"constraining_percent\": 0.004519774011299435, \"uncertainty_percent\": 0.2214689265536723, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"open\": 264.72, \"high\": 264.72, \"low\": 248.02, \"close\": 256.45, \"volume\": 31394, \"movement\": 0, \"positive_percent\": 0.3113425925925926, \"negative_percent\": 0.4131944444444444, \"litigious_percent\": 0.02430555555555556, \"superfluous_percent\": 0.032407407407407406, \"constraining_percent\": 0.0046296296296296285, \"uncertainty_percent\": 0.2141203703703704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"open\": 256.71, \"high\": 263.87, \"low\": 253.06, \"close\": 261.01, \"volume\": 21075, \"movement\": 1, \"positive_percent\": 0.3490460157126824, \"negative_percent\": 0.3771043771043771, \"litigious_percent\": 0.022446689113355782, \"superfluous_percent\": 0.014590347923681257, \"constraining_percent\": 0.0033670033670033673, \"uncertainty_percent\": 0.2334455667789001, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"open\": 261.61, \"high\": 268.01, \"low\": 257.01, \"close\": 262.255, \"volume\": 19856, \"movement\": 1, \"positive_percent\": 0.34294871794871795, \"negative_percent\": 0.3701923076923077, \"litigious_percent\": 0.049679487179487176, \"superfluous_percent\": 0.02564102564102564, \"constraining_percent\": 0.00641025641025641, \"uncertainty_percent\": 0.20512820512820512, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"open\": 262.4, \"high\": 269.38, \"low\": 251.98, \"close\": 255.37, \"volume\": 37514, \"movement\": 0, \"positive_percent\": 0.36890243902439024, \"negative_percent\": 0.3932926829268293, \"litigious_percent\": 0.027439024390243903, \"superfluous_percent\": 0.021341463414634148, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18902439024390244, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"open\": 279.0, \"high\": 294.94, \"low\": 277.45, \"close\": 282.72, \"volume\": 68433, \"movement\": 1, \"positive_percent\": 0.31770889198755764, \"negative_percent\": 0.3752011155207552, \"litigious_percent\": 0.041617505094926524, \"superfluous_percent\": 0.025421001823447392, \"constraining_percent\": 0.0033251099431513467, \"uncertainty_percent\": 0.236726375630162, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"open\": 282.74, \"high\": 285.88, \"low\": 273.485, \"close\": 276.84, \"volume\": 30555, \"movement\": 0, \"positive_percent\": 0.32061068702290074, \"negative_percent\": 0.3753180661577608, \"litigious_percent\": 0.04452926208651401, \"superfluous_percent\": 0.025445292620865142, \"constraining_percent\": 0.005089058524173028, \"uncertainty_percent\": 0.22900763358778625, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"open\": 276.05, \"high\": 280.25, \"low\": 272.5, \"close\": 275.49, \"volume\": 14154, \"movement\": 0, \"positive_percent\": 0.3503759398496241, \"negative_percent\": 0.3849624060150376, \"litigious_percent\": 0.03157894736842105, \"superfluous_percent\": 0.006015037593984964, \"constraining_percent\": 0.003007518796992481, \"uncertainty_percent\": 0.22406015037593985, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"open\": 275.36, \"high\": 276.92, \"low\": 264.735, \"close\": 275.38, \"volume\": 25372, \"movement\": 1, \"positive_percent\": 0.3463338533541342, \"negative_percent\": 0.374414976599064, \"litigious_percent\": 0.0358814352574103, \"superfluous_percent\": 0.0202808112324493, \"constraining_percent\": 0.0015600624024961, \"uncertainty_percent\": 0.22152886115444614, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"open\": 275.15, \"high\": 281.01, \"low\": 273.01, \"close\": 278.77, \"volume\": 19730, \"movement\": 1, \"positive_percent\": 0.31841652323580033, \"negative_percent\": 0.38726333907056804, \"litigious_percent\": 0.03270223752151463, \"superfluous_percent\": 0.02065404475043029, \"constraining_percent\": 0.0034423407917383822, \"uncertainty_percent\": 0.2375215146299484, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"open\": 278.71, \"high\": 279.11, \"low\": 262.43, \"close\": 264.24, \"volume\": 31802, \"movement\": 0, \"positive_percent\": 0.3306122448979592, \"negative_percent\": 0.35374149659863946, \"litigious_percent\": 0.05578231292517007, \"superfluous_percent\": 0.024489795918367342, \"constraining_percent\": 0.005442176870748299, \"uncertainty_percent\": 0.22993197278911565, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"open\": 277.09, \"high\": 278.25, \"low\": 265.78, \"close\": 269.7, \"volume\": 34806, \"movement\": 0, \"positive_percent\": 0.3372531367805098, \"negative_percent\": 0.3648793113149159, \"litigious_percent\": 0.04056715242221347, \"superfluous_percent\": 0.02211219265177516, \"constraining_percent\": 0.0031508467900748325, \"uncertainty_percent\": 0.2320373600405109, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"open\": 269.7, \"high\": 271.1, \"low\": 226.19, \"close\": 251.6, \"volume\": 48179, \"movement\": 0, \"positive_percent\": 0.26752618855761484, \"negative_percent\": 0.467365028203062, \"litigious_percent\": 0.0257856567284448, \"superfluous_percent\": 0.029008863819500408, \"constraining_percent\": 0.0040290088638195, \"uncertainty_percent\": 0.2062852538275584, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"open\": 251.04, \"high\": 253.88, \"low\": 237.55, \"close\": 244.44, \"volume\": 11034, \"movement\": 0, \"positive_percent\": 0.3083333333333333, \"negative_percent\": 0.4197916666666667, \"litigious_percent\": 0.035416666666666666, \"superfluous_percent\": 0.0125, \"constraining_percent\": 0.003125, \"uncertainty_percent\": 0.22083333333333333, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"open\": 247.27, \"high\": 254.39, \"low\": 245.1, \"close\": 247.0, \"volume\": 7150, \"movement\": 0, \"positive_percent\": 0.35257082896117525, \"negative_percent\": 0.4018887722980063, \"litigious_percent\": 0.01888772298006296, \"superfluous_percent\": 0.02098635886673662, \"constraining_percent\": 0.002098635886673662, \"uncertainty_percent\": 0.20356768100734526, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"open\": 245.01, \"high\": 246.0, \"low\": 229.27, \"close\": 230.01, \"volume\": 8476, \"movement\": 0, \"positive_percent\": 0.2917115177610334, \"negative_percent\": 0.4208826695371367, \"litigious_percent\": 0.03444564047362755, \"superfluous_percent\": 0.03444564047362755, \"constraining_percent\": 0.005382131324004306, \"uncertainty_percent\": 0.2131324004305705, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"open\": 230.13, \"high\": 236.09, \"low\": 206.01, \"close\": 220.22, \"volume\": 34534, \"movement\": 0, \"positive_percent\": 0.2867647058823529, \"negative_percent\": 0.4506302521008403, \"litigious_percent\": 0.030462184873949583, \"superfluous_percent\": 0.018907563025210083, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21323529411764705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"open\": 190.1, \"high\": 195.1, \"low\": 172.36, \"close\": 195.1, \"volume\": 39781, \"movement\": 1, \"positive_percent\": 0.31089869925108393, \"negative_percent\": 0.42037839968466695, \"litigious_percent\": 0.026704769412692158, \"superfluous_percent\": 0.020496649586125345, \"constraining_percent\": 0.002660622782814348, \"uncertainty_percent\": 0.21886085928261725, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"open\": 194.645, \"high\": 211.47, \"low\": 192.24, \"close\": 194.695, \"volume\": 28161, \"movement\": 1, \"positive_percent\": 0.3324287652645861, \"negative_percent\": 0.4070556309362279, \"litigious_percent\": 0.033921302578018994, \"superfluous_percent\": 0.01492537313432836, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21166892808683851, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"open\": 194.69, \"high\": 204.83, \"low\": 191.45, \"close\": 204.83, \"volume\": 12001, \"movement\": 1, \"positive_percent\": 0.25910364145658266, \"negative_percent\": 0.4201680672268908, \"litigious_percent\": 0.030812324929971987, \"superfluous_percent\": 0.02100840336134454, \"constraining_percent\": 0.0070028011204481795, \"uncertainty_percent\": 0.2619047619047619, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"open\": 204.21, \"high\": 219.96, \"low\": 200.03, \"close\": 214.31, \"volume\": 25041, \"movement\": 1, \"positive_percent\": 0.34508076358296624, \"negative_percent\": 0.3847283406754772, \"litigious_percent\": 0.041116005873715125, \"superfluous_percent\": 0.024963289280469897, \"constraining_percent\": 0.005873715124816446, \"uncertainty_percent\": 0.19823788546255505, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"open\": 214.64, \"high\": 220.63, \"low\": 204.22, \"close\": 204.56, \"volume\": 15119, \"movement\": 0, \"positive_percent\": 0.297979797979798, \"negative_percent\": 0.43265993265993263, \"litigious_percent\": 0.03872053872053872, \"superfluous_percent\": 0.006734006734006735, \"constraining_percent\": 0.005050505050505051, \"uncertainty_percent\": 0.21885521885521889, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"open\": 204.56, \"high\": 215.1, \"low\": 204.56, \"close\": 207.14, \"volume\": 12077, \"movement\": 1, \"positive_percent\": 0.32015065913371, \"negative_percent\": 0.3879472693032015, \"litigious_percent\": 0.032015065913371, \"superfluous_percent\": 0.02259887005649717, \"constraining_percent\": 0.003766478342749529, \"uncertainty_percent\": 0.2335216572504708, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"open\": 222.96, \"high\": 224.85, \"low\": 210.865, \"close\": 219.0, \"volume\": 30832, \"movement\": 0, \"positive_percent\": 0.310099573257468, \"negative_percent\": 0.4041251778093883, \"litigious_percent\": 0.030156472261735418, \"superfluous_percent\": 0.02432432432432433, \"constraining_percent\": 0.004836415362731153, \"uncertainty_percent\": 0.2264580369843528, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"open\": 219.0, \"high\": 221.15, \"low\": 213.5, \"close\": 218.93, \"volume\": 10413, \"movement\": 0, \"positive_percent\": 0.28771929824561404, \"negative_percent\": 0.4263157894736842, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.014035087719298246, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.2456140350877193, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"open\": 218.59, \"high\": 225.06, \"low\": 218.155, \"close\": 219.9, \"volume\": 5605, \"movement\": 1, \"positive_percent\": 0.3479212253829322, \"negative_percent\": 0.4135667396061269, \"litigious_percent\": 0.0262582056892779, \"superfluous_percent\": 0.01312910284463895, \"constraining_percent\": 0.002188183807439825, \"uncertainty_percent\": 0.19693654266958424, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"open\": 219.02, \"high\": 221.28, \"low\": 216.84, \"close\": 220.07, \"volume\": 5219, \"movement\": 1, \"positive_percent\": 0.3508771929824561, \"negative_percent\": 0.3859649122807017, \"litigious_percent\": 0.017543859649122806, \"superfluous_percent\": 0.02631578947368421, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21929824561403508, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"open\": 219.69, \"high\": 223.0, \"low\": 213.0, \"close\": 215.25, \"volume\": 10146, \"movement\": 0, \"positive_percent\": 0.3333333333333333, \"negative_percent\": 0.42105263157894735, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.03508771929824561, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18421052631578946, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"open\": 216.015, \"high\": 216.05, \"low\": 204.09, \"close\": 209.89, \"volume\": 18210, \"movement\": 0, \"positive_percent\": 0.4368932038834951, \"negative_percent\": 0.2815533980582524, \"litigious_percent\": 0.029126213592233014, \"superfluous_percent\": 0.03883495145631068, \"constraining_percent\": 0.019417475728155338, \"uncertainty_percent\": 0.1941747572815534, \"lead_movement\": null}], \"data-053772705c2387e0addddb774cbbd457\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"close\": -2.1124993371541687, \"positive_percent\": 1.3080074080347925, \"negative_percent\": -1.3377674224535485, \"litigious_percent\": 1.4224339191569986, \"superfluous_percent\": 0.038526592184344816, \"constraining_percent\": -0.19412900796853524, \"uncertainty_percent\": -0.09173455440168682}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"close\": -1.6962442564850746, \"positive_percent\": 1.757874554956677, \"negative_percent\": -0.5216755391242294, \"litigious_percent\": -1.8460228541959132, \"superfluous_percent\": -0.7899577108557307, \"constraining_percent\": 0.38320836426299093, \"uncertainty_percent\": -1.274999743955868}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"close\": -1.1709185298947262, \"positive_percent\": 0.4238166692356861, \"negative_percent\": 0.14796548373001014, \"litigious_percent\": -1.1411445492460637, \"superfluous_percent\": 0.7964385852423237, \"constraining_percent\": -0.5168124977691091, \"uncertainty_percent\": -0.8910043568340144}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"close\": -1.8086288057830648, \"positive_percent\": 0.5290533223282163, \"negative_percent\": 0.19380077710283605, \"litigious_percent\": -1.008149542028977, \"superfluous_percent\": 0.662011199653975, \"constraining_percent\": 0.03539342760224727, \"uncertainty_percent\": -1.3060307500659571}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"close\": -1.448998248029496, \"positive_percent\": 1.5537530768171326, \"negative_percent\": -1.1631091435070435, \"litigious_percent\": -0.339223782573124, \"superfluous_percent\": 0.21802355516073602, \"constraining_percent\": -0.25807603149082353, \"uncertainty_percent\": -0.268997739211543}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"close\": -1.301457506387007, \"positive_percent\": 0.9501277638386724, \"negative_percent\": -0.20334339584616914, \"litigious_percent\": -0.40281961155035795, \"superfluous_percent\": -0.9557344445572733, \"constraining_percent\": -0.31723997349610533, \"uncertainty_percent\": -0.8791808033739744}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"close\": -0.24821256360712518, \"positive_percent\": 0.5398517281675337, \"negative_percent\": -0.6081171779828584, \"litigious_percent\": 0.3021601506744932, \"superfluous_percent\": -0.18469317068097052, \"constraining_percent\": -0.0009613596291690321, \"uncertainty_percent\": 0.2771939921847942}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"close\": 0.06747275371581918, \"positive_percent\": 1.1968904461928098, \"negative_percent\": -0.8923743721124068, \"litigious_percent\": -0.3532670537117648, \"superfluous_percent\": 0.336000455407011, \"constraining_percent\": -0.46637381858585364, \"uncertainty_percent\": -0.1925271922776764}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"close\": 0.00508492057988305, \"positive_percent\": -0.4438025851521987, \"negative_percent\": 0.6269874971944394, \"litigious_percent\": -0.3985293081896588, \"superfluous_percent\": -0.08493541895052725, \"constraining_percent\": 0.08778110839592579, \"uncertainty_percent\": -0.3929179359722594}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"close\": -0.07156710535156652, \"positive_percent\": 0.3771426724666145, \"negative_percent\": -0.3500308580987487, \"litigious_percent\": 0.4335098064329245, \"superfluous_percent\": -0.8950567629852274, \"constraining_percent\": -0.7017562487515352, \"uncertainty_percent\": 0.2851801409646328}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"close\": -0.05197185060217317, \"positive_percent\": 0.20108512931263212, \"negative_percent\": -0.8188501716731507, \"litigious_percent\": 2.0974235739851985, \"superfluous_percent\": -0.35442653414493963, \"constraining_percent\": 0.29162671858117833, \"uncertainty_percent\": 0.6743165919824023}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"close\": 0.2534835910795434, \"positive_percent\": 1.2238809327582183, \"negative_percent\": -0.7000663022721972, \"litigious_percent\": -0.07398646870944633, \"superfluous_percent\": 0.6381769118653743, \"constraining_percent\": 0.431513080102912, \"uncertainty_percent\": -1.0611520539018309}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"close\": 1.6078614928758344, \"positive_percent\": 0.3504724513825006, \"negative_percent\": -0.43687942649011147, \"litigious_percent\": -0.11451120896677974, \"superfluous_percent\": 0.08312666001396807, \"constraining_percent\": -0.16120002405870087, \"uncertainty_percent\": 0.3713686161107828}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"close\": 2.6406466843732623, \"positive_percent\": -1.47077888225426, \"negative_percent\": 2.5404862330242852, \"litigious_percent\": -0.6243254909294675, \"superfluous_percent\": -0.7714034088747557, \"constraining_percent\": -0.5859443473108152, \"uncertainty_percent\": -2.4032574232696384}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"close\": 0.8113720204152075, \"positive_percent\": -2.132626323885716, \"negative_percent\": 3.1421634926519224, \"litigious_percent\": -1.5432353353288792, \"superfluous_percent\": -0.3946115960899595, \"constraining_percent\": -0.2936940972418736, \"uncertainty_percent\": -2.255652617076424}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"close\": 0.8194406547237804, \"positive_percent\": -2.1463728329382894, \"negative_percent\": 2.1973332773545855, \"litigious_percent\": -0.2718503868824127, \"superfluous_percent\": 1.256856452974408, \"constraining_percent\": 0.09543800986187877, \"uncertainty_percent\": -1.186602145103405}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"close\": 0.6782395543237422, \"positive_percent\": -1.271260493845782, \"negative_percent\": 1.6353264393179872, \"litigious_percent\": -1.6310467448207555, \"superfluous_percent\": 1.4260158142248975, \"constraining_percent\": -0.34508535462821743, \"uncertainty_percent\": -1.0117540279340227}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"close\": 0.7254986981311017, \"positive_percent\": -0.5640545332911348, \"negative_percent\": 0.6864022087652758, \"litigious_percent\": 0.22205267792730407, \"superfluous_percent\": 0.4483596274255952, \"constraining_percent\": -0.9289465162007994, \"uncertainty_percent\": -0.5969616562364489}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"close\": 1.054871877227519, \"positive_percent\": -1.112183444168155, \"negative_percent\": 0.7216295739143861, \"litigious_percent\": -0.10493028170856454, \"superfluous_percent\": 0.8970582332185704, \"constraining_percent\": 0.08656045252214441, \"uncertainty_percent\": 0.2626826547565435}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"close\": 0.7903359381107113, \"positive_percent\": 0.24351222734497038, \"negative_percent\": -0.6974162159868128, \"litigious_percent\": 0.84426128794556, \"superfluous_percent\": 0.492014825214196, \"constraining_percent\": 0.3731895316177118, \"uncertainty_percent\": 0.5564095332129168}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"close\": 0.5364621229016618, \"positive_percent\": -0.4321555393091087, \"negative_percent\": 0.20377305039070728, \"litigious_percent\": -0.7883584869898351, \"superfluous_percent\": 1.4542844188246105, \"constraining_percent\": 0.41097706503840703, \"uncertainty_percent\": 0.1796624880095898}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"close\": 0.6678655959270042, \"positive_percent\": 0.528783466705642, \"negative_percent\": -0.5810146383548227, \"litigious_percent\": -1.0034030963959473, \"superfluous_percent\": -1.2167854726041645, \"constraining_percent\": -0.02333419570595225, \"uncertainty_percent\": 1.1704299889006406}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"close\": 0.703742202049055, \"positive_percent\": 0.3733829548206085, \"negative_percent\": -0.7313193448335582, \"litigious_percent\": 2.1470472480819836, \"superfluous_percent\": 0.4398926429761296, \"constraining_percent\": 1.023467304549684, \"uncertainty_percent\": -0.2813493897608828}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"close\": 0.5053402477114497, \"positive_percent\": 1.0348598412402845, \"negative_percent\": -0.22899581302546118, \"litigious_percent\": -0.4258603718243554, \"superfluous_percent\": -0.20468236221642205, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.1069625473425797}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"close\": 1.2934729203524835, \"positive_percent\": -0.26989904092421, \"negative_percent\": -0.6224015453177404, \"litigious_percent\": 1.2143897160207877, \"superfluous_percent\": 0.40690745846421444, \"constraining_percent\": -0.03774446600416683, \"uncertainty_percent\": 1.3386310626569353}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"close\": 1.1240315998724353, \"positive_percent\": -0.19594161726960954, \"negative_percent\": -0.6198584239860975, \"litigious_percent\": 1.551238900408911, \"superfluous_percent\": 0.41054904801385983, \"constraining_percent\": 0.56900889782834, \"uncertainty_percent\": 0.942905265015268}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"close\": 1.0851292558846706, \"positive_percent\": 0.5626789560928337, \"negative_percent\": -0.41013980210739015, \"litigious_percent\": 0.05307028161191413, \"superfluous_percent\": -2.5023653547520164, \"constraining_percent\": -0.14698772758705336, \"uncertainty_percent\": 0.6892568428270232}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"close\": 1.0819594352634447, \"positive_percent\": 0.4596591701484616, \"negative_percent\": -0.63949633601385, \"litigious_percent\": 0.550807400620481, \"superfluous_percent\": -0.3636915473010804, \"constraining_percent\": -0.6448758439474906, \"uncertainty_percent\": 0.5594822706573539}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"close\": 1.1796475434993896, \"positive_percent\": -0.25186379605677556, \"negative_percent\": -0.3601054278959803, \"litigious_percent\": 0.18301909705014627, \"superfluous_percent\": -0.30773771197479366, \"constraining_percent\": 0.0025799586930226877, \"uncertainty_percent\": 1.3793963859698544}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"close\": 0.7609430559866222, \"positive_percent\": 0.05896592925331201, \"negative_percent\": -1.089046414016831, \"litigious_percent\": 2.8530580452863687, \"superfluous_percent\": 0.26730439668783756, \"constraining_percent\": 0.690472611068451, \"uncertainty_percent\": 0.9902944465333682}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"close\": 0.9182814250038077, \"positive_percent\": 0.22822090709295745, \"negative_percent\": -0.8468518016737706, \"litigious_percent\": 1.0928787375478275, \"superfluous_percent\": -0.08913738906012825, \"constraining_percent\": -0.09768655017761382, \"uncertainty_percent\": 1.0982338030799368}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"close\": 0.3967018500567256, \"positive_percent\": -1.5488947702909557, \"negative_percent\": 1.3817261648955461, \"litigious_percent\": -0.6171316729596487, \"superfluous_percent\": 0.9447869082697296, \"constraining_percent\": 0.20437882631204116, \"uncertainty_percent\": -0.22202961758192985}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"close\": 0.19037534416605667, \"positive_percent\": -0.5088518804403341, \"negative_percent\": 0.34723132468908924, \"litigious_percent\": 0.4970402348942453, \"superfluous_percent\": -1.5301629638032883, \"constraining_percent\": -0.10657718734862125, \"uncertainty_percent\": 0.5238238304243745}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"close\": 0.26414571498730155, \"positive_percent\": 0.6186196210676993, \"negative_percent\": -0.042071664442161885, \"litigious_percent\": -1.4151252431026464, \"superfluous_percent\": -0.25791836712872923, \"constraining_percent\": -0.45962028904551205, \"uncertainty_percent\": -0.36135460940367536}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"close\": -0.22544748823650693, \"positive_percent\": -0.9324885057762341, \"negative_percent\": 0.3709554594506877, \"litigious_percent\": 0.3847062104238857, \"superfluous_percent\": 1.759849036817153, \"constraining_percent\": 0.6698184730385445, \"uncertainty_percent\": 0.12901107482245153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"close\": -0.5075615235255639, \"positive_percent\": -1.058566832258698, \"negative_percent\": 1.0178242044146923, \"litigious_percent\": -0.07612337586183869, \"superfluous_percent\": -0.569564011450709, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.1342862461090579}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"close\": -1.2314332872090286, \"positive_percent\": -0.4434689530807786, \"negative_percent\": 0.35998998331857646, \"litigious_percent\": -0.5108033086957388, \"superfluous_percent\": -0.3313338325813071, \"constraining_percent\": -0.26631111703685273, \"uncertainty_percent\": 0.42269869076277483}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"close\": -1.2431039904053582, \"positive_percent\": 0.10526319170484486, \"negative_percent\": 0.07028299011020143, \"litigious_percent\": 0.3240477169473289, \"superfluous_percent\": -1.166559690182187, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.053981522419945346}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"close\": -0.9510482449860937, \"positive_percent\": -1.7635584100777033, \"negative_percent\": 0.35541625055573844, \"litigious_percent\": -0.03561711361759298, \"superfluous_percent\": -0.25461353526953495, \"constraining_percent\": 1.2272875859332686, \"uncertainty_percent\": 2.629480910617308}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"close\": -0.6778673405386719, \"positive_percent\": 0.4277219416554931, \"negative_percent\": -0.4152296124177505, \"litigious_percent\": 1.1563733348033982, \"superfluous_percent\": 0.338288829582542, \"constraining_percent\": 0.8389107742299865, \"uncertainty_percent\": -0.6346034861830764}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"close\": -0.9588287137836472, \"positive_percent\": -0.7727302009757318, \"negative_percent\": 0.6270550399473346, \"litigious_percent\": 0.8792515972726556, \"superfluous_percent\": -2.3945800703995297, \"constraining_percent\": 0.5557474852865275, \"uncertainty_percent\": 0.4224095163585772}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"close\": -0.8844820119403619, \"positive_percent\": -0.2076662487750836, \"negative_percent\": -0.34523319112584494, \"litigious_percent\": 0.10352304143608938, \"superfluous_percent\": -0.016176451606952285, \"constraining_percent\": 0.11407501673294108, \"uncertainty_percent\": 1.1743310083141587}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"close\": -0.5427177158700633, \"positive_percent\": -0.463836104772548, \"negative_percent\": 0.006559541918229539, \"litigious_percent\": -0.11149000995219245, \"superfluous_percent\": 0.24249748659480447, \"constraining_percent\": 0.48210608801664484, \"uncertainty_percent\": 0.8121921068323511}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"close\": -0.5447348744472066, \"positive_percent\": -1.0342373427643439, \"negative_percent\": 0.4891000336212831, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": -1.3000280983130097, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 1.7942851198466558}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"close\": -0.5167828198782193, \"positive_percent\": 0.5001161783800562, \"negative_percent\": 0.21186870332243668, \"litigious_percent\": -0.5624644282342224, \"superfluous_percent\": -1.4358501133319677, \"constraining_percent\": -0.42881808611644145, \"uncertainty_percent\": -0.7013209528280824}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"close\": -0.5118840061908714, \"positive_percent\": 0.5754542864836891, \"negative_percent\": -0.3883400485139699, \"litigious_percent\": -1.5705912618206086, \"superfluous_percent\": 0.541050825609219, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.44512268860175513}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"close\": -0.6507797825027462, \"positive_percent\": 0.12831772280367976, \"negative_percent\": 0.3746513272558152, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": 1.8561071998393825, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.3537605530581107}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"close\": -0.8052364964097278, \"positive_percent\": 2.7677257880215986, \"negative_percent\": -2.6587949676735683, \"litigious_percent\": -0.230676395881147, \"superfluous_percent\": 2.417878854850327, \"constraining_percent\": 5.497619306571862, \"uncertainty_percent\": -0.8429126421983911}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.VConcatChart(...)"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "# sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "#close line\n",
    "close = alt.Chart(df).mark_line(point=False, strokeWidth=5).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('close:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "# positive line\n",
    "positive = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('positive_percent:Q'),\n",
    "    color=alt.value('#31a354')\n",
    ")\n",
    "\n",
    "#negative line\n",
    "negative = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('negative_percent:Q'),\n",
    "    color=alt.value('#756bb1')\n",
    ")\n",
    "\n",
    "\n",
    "#uncertainty\n",
    "uncertainty = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('uncertainty_percent:Q'),\n",
    "    color=alt.value('#de2d26')\n",
    ")\n",
    "\n",
    "lower =alt.layer(close,positive,negative,uncertainty\n",
    ").interactive()\n",
    "\n",
    "\n",
    "\n",
    "## candlestick chart\n",
    "open_close_color = alt.condition(\"datum.open <= datum.close\",\n",
    "                                 alt.value(\"#06982d\"),\n",
    "                                 alt.value(\"#ae1325\"))\n",
    "\n",
    "base = alt.Chart(source).encode(\n",
    "    alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "         axis = alt.Axis(\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "         )\n",
    "    ),\n",
    "    color=open_close_color\n",
    ")\n",
    "\n",
    "\n",
    "rule = base.mark_rule().encode(\n",
    "    alt.Y(\n",
    "        'low:Q',\n",
    "        title= 'Price',\n",
    "        scale=alt.Scale(zero=False),\n",
    "    ),\n",
    "    alt.Y2('high:Q')\n",
    ")\n",
    "\n",
    "bar = base.mark_bar().encode(\n",
    "    alt.Y('open:Q'),\n",
    "    alt.Y2('close:Q')\n",
    ")\n",
    "\n",
    "upper = alt.layer(rule+bar).interactive()\n",
    "\n",
    "#combine the two graphs\n",
    "alt.vconcat(upper, lower)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-8d9657cde32c443b80e6b7eb527b192d\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-8d9657cde32c443b80e6b7eb527b192d\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-8d9657cde32c443b80e6b7eb527b192d\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"vconcat\": [{\"data\": {\"name\": \"data-f54116fcfcc947b42f2bddf50d47c227\"}, \"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 5}, \"encoding\": {\"color\": {\"value\": \"#636363\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"close\"}}}, {\"layer\": [{\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 5}, \"encoding\": {\"color\": {\"value\": \"#636363\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"close\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#31a354\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"positive_percent\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#756bb1\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"negative_percent\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#de2d26\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"uncertainty_percent\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#feb24c\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"superfluous_percent\"}}}], \"data\": {\"name\": \"data-053772705c2387e0addddb774cbbd457\"}}], \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-f54116fcfcc947b42f2bddf50d47c227\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"open\": 154.48, \"high\": 167.0, \"low\": 149.74, \"close\": 164.525, \"volume\": 40037, \"movement\": 1, \"positive_percent\": 0.3796196627197704, \"negative_percent\": 0.34230355220667386, \"litigious_percent\": 0.04341585934696807, \"superfluous_percent\": 0.022963760315751702, \"constraining_percent\": 0.002870470039468963, \"uncertainty_percent\": 0.20882669537136705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"open\": 164.83, \"high\": 196.67, \"low\": 164.83, \"close\": 178.97, \"volume\": 131298, \"movement\": 1, \"positive_percent\": 0.3972706595905989, \"negative_percent\": 0.3798332069749811, \"litigious_percent\": 0.015163002274450341, \"superfluous_percent\": 0.01743745261561789, \"constraining_percent\": 0.004548900682335102, \"uncertainty_percent\": 0.18574677786201668, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"open\": 178.57, \"high\": 210.44, \"low\": 178.27, \"close\": 197.2, \"volume\": 81727, \"movement\": 1, \"positive_percent\": 0.34492753623188405, \"negative_percent\": 0.4106280193236715, \"litigious_percent\": 0.021256038647343, \"superfluous_percent\": 0.028019323671497585, \"constraining_percent\": 0.0019323671497584538, \"uncertainty_percent\": 0.1932367149758454, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"open\": 197.2, \"high\": 200.46, \"low\": 172.385, \"close\": 175.07, \"volume\": 30325, \"movement\": 0, \"positive_percent\": 0.3490566037735849, \"negative_percent\": 0.41273584905660377, \"litigious_percent\": 0.02240566037735849, \"superfluous_percent\": 0.027122641509433963, \"constraining_percent\": 0.003537735849056604, \"uncertainty_percent\": 0.18514150943396224, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"open\": 173.88, \"high\": 188.87, \"low\": 168.3, \"close\": 187.55, \"volume\": 19325, \"movement\": 1, \"positive_percent\": 0.38926174496644295, \"negative_percent\": 0.3503355704697987, \"litigious_percent\": 0.02818791946308725, \"superfluous_percent\": 0.024161073825503355, \"constraining_percent\": 0.002684563758389261, \"uncertainty_percent\": 0.20536912751677847, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"open\": 187.96, \"high\": 198.75, \"low\": 182.5, \"close\": 192.67, \"volume\": 35534, \"movement\": 1, \"positive_percent\": 0.3655778894472362, \"negative_percent\": 0.3944723618090452, \"litigious_percent\": 0.027638190954773868, \"superfluous_percent\": 0.016331658291457288, \"constraining_percent\": 0.002512562814070352, \"uncertainty_percent\": 0.1934673366834171, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"open\": 226.03, \"high\": 243.31, \"low\": 221.79, \"close\": 229.22, \"volume\": 80240, \"movement\": 1, \"positive_percent\": 0.3494802902529908, \"negative_percent\": 0.37585801137477937, \"litigious_percent\": 0.033732104334183166, \"superfluous_percent\": 0.021474798980192198, \"constraining_percent\": 0.003432045499117474, \"uncertainty_percent\": 0.21602274955873704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"open\": 230.04, \"high\": 240.56, \"low\": 227.8, \"close\": 240.175, \"volume\": 40036, \"movement\": 1, \"positive_percent\": 0.3752598752598753, \"negative_percent\": 0.3627858627858628, \"litigious_percent\": 0.028066528066528068, \"superfluous_percent\": 0.02494802494802495, \"constraining_percent\": 0.002079002079002079, \"uncertainty_percent\": 0.20686070686070687, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"open\": 240.99, \"high\": 246.13, \"low\": 234.65, \"close\": 238.01, \"volume\": 43558, \"movement\": 0, \"positive_percent\": 0.31088560885608857, \"negative_percent\": 0.4326568265682657, \"litigious_percent\": 0.027675276752767528, \"superfluous_percent\": 0.022140221402214017, \"constraining_percent\": 0.003690036900369004, \"uncertainty_percent\": 0.2029520295202952, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"open\": 238.0, \"high\": 245.57, \"low\": 230.38, \"close\": 235.35, \"volume\": 38558, \"movement\": 0, \"positive_percent\": 0.34309623430962344, \"negative_percent\": 0.3877266387726639, \"litigious_percent\": 0.03486750348675035, \"superfluous_percent\": 0.016736401673640166, \"constraining_percent\": 0.0013947001394700141, \"uncertainty_percent\": 0.21617852161785214, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"open\": 235.52, \"high\": 239.49, \"low\": 231.31, \"close\": 236.03, \"volume\": 40700, \"movement\": 1, \"positive_percent\": 0.3361884368308351, \"negative_percent\": 0.36616702355460384, \"litigious_percent\": 0.04925053533190578, \"superfluous_percent\": 0.02034261241970021, \"constraining_percent\": 0.004282655246252678, \"uncertainty_percent\": 0.22376873661670235, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"open\": 235.69, \"high\": 249.65, \"low\": 233.65, \"close\": 246.63, \"volume\": 63252, \"movement\": 1, \"positive_percent\": 0.3763188745603752, \"negative_percent\": 0.3716295427901524, \"litigious_percent\": 0.03048065650644783, \"superfluous_percent\": 0.026963657678780773, \"constraining_percent\": 0.004689331770222743, \"uncertainty_percent\": 0.1899179366940211, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"open\": 281.66, \"high\": 303.38, \"low\": 281.21, \"close\": 293.63, \"volume\": 97304, \"movement\": 1, \"positive_percent\": 0.34204980095230664, \"negative_percent\": 0.3837327296854266, \"litigious_percent\": 0.03013035672468972, \"superfluous_percent\": 0.02326125985481227, \"constraining_percent\": 0.0029662009210834443, \"uncertainty_percent\": 0.21785965186168135, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"open\": 293.17, \"high\": 336.0, \"low\": 290.01, \"close\": 329.47, \"volume\": 146017, \"movement\": 1, \"positive_percent\": 0.27059114518921595, \"negative_percent\": 0.5206529804600544, \"litigious_percent\": 0.02572347266881029, \"superfluous_percent\": 0.0175612169181301, \"constraining_percent\": 0.0017313875834776154, \"uncertainty_percent\": 0.16373979718031165, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"open\": 331.32, \"high\": 347.5, \"low\": 174.535, \"close\": 265.99, \"volume\": 221303, \"movement\": 0, \"positive_percent\": 0.2446228850014339, \"negative_percent\": 0.5483223401204473, \"litigious_percent\": 0.01778032692859191, \"superfluous_percent\": 0.02007456266131345, \"constraining_percent\": 0.002581015199311729, \"uncertainty_percent\": 0.16661887008890164, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"open\": 267.37, \"high\": 284.825, \"low\": 220.48, \"close\": 266.27, \"volume\": 112477, \"movement\": 0, \"positive_percent\": 0.24408352668213454, \"negative_percent\": 0.5048723897911833, \"litigious_percent\": 0.02877030162412993, \"superfluous_percent\": 0.031090487238979118, \"constraining_percent\": 0.0037122969837587007, \"uncertainty_percent\": 0.1874709976798144, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"open\": 268.0, \"high\": 273.87, \"low\": 226.04, \"close\": 261.37, \"volume\": 64341, \"movement\": 0, \"positive_percent\": 0.27841945288753805, \"negative_percent\": 0.4790273556231003, \"litigious_percent\": 0.01702127659574468, \"superfluous_percent\": 0.03221884498480243, \"constraining_percent\": 0.0024316109422492407, \"uncertainty_percent\": 0.19088145896656536, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"open\": 257.42, \"high\": 276.84, \"low\": 246.2, \"close\": 263.01, \"volume\": 39312, \"movement\": 1, \"positive_percent\": 0.3061674008810573, \"negative_percent\": 0.4353891336270191, \"litigious_percent\": 0.03303964757709251, \"superfluous_percent\": 0.02569750367107195, \"constraining_percent\": 0.0007342143906020558, \"uncertainty_percent\": 0.19897209985315711, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"open\": 260.58, \"high\": 281.26, \"low\": 257.55, \"close\": 274.44, \"volume\": 66627, \"movement\": 1, \"positive_percent\": 0.28466100336592404, \"negative_percent\": 0.4370091360794999, \"litigious_percent\": 0.030213175188331463, \"superfluous_percent\": 0.02869049527167815, \"constraining_percent\": 0.003686488219265908, \"uncertainty_percent\": 0.21573970187530053, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"open\": 274.445, \"high\": 274.445, \"low\": 253.21, \"close\": 265.26, \"volume\": 34212, \"movement\": 0, \"positive_percent\": 0.33785310734463275, \"negative_percent\": 0.37175141242937854, \"litigious_percent\": 0.0384180790960452, \"superfluous_percent\": 0.02598870056497175, \"constraining_percent\": 0.004519774011299435, \"uncertainty_percent\": 0.2214689265536723, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"open\": 264.72, \"high\": 264.72, \"low\": 248.02, \"close\": 256.45, \"volume\": 31394, \"movement\": 0, \"positive_percent\": 0.3113425925925926, \"negative_percent\": 0.4131944444444444, \"litigious_percent\": 0.02430555555555556, \"superfluous_percent\": 0.032407407407407406, \"constraining_percent\": 0.0046296296296296285, \"uncertainty_percent\": 0.2141203703703704, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"open\": 256.71, \"high\": 263.87, \"low\": 253.06, \"close\": 261.01, \"volume\": 21075, \"movement\": 1, \"positive_percent\": 0.3490460157126824, \"negative_percent\": 0.3771043771043771, \"litigious_percent\": 0.022446689113355782, \"superfluous_percent\": 0.014590347923681257, \"constraining_percent\": 0.0033670033670033673, \"uncertainty_percent\": 0.2334455667789001, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"open\": 261.61, \"high\": 268.01, \"low\": 257.01, \"close\": 262.255, \"volume\": 19856, \"movement\": 1, \"positive_percent\": 0.34294871794871795, \"negative_percent\": 0.3701923076923077, \"litigious_percent\": 0.049679487179487176, \"superfluous_percent\": 0.02564102564102564, \"constraining_percent\": 0.00641025641025641, \"uncertainty_percent\": 0.20512820512820512, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"open\": 262.4, \"high\": 269.38, \"low\": 251.98, \"close\": 255.37, \"volume\": 37514, \"movement\": 0, \"positive_percent\": 0.36890243902439024, \"negative_percent\": 0.3932926829268293, \"litigious_percent\": 0.027439024390243903, \"superfluous_percent\": 0.021341463414634148, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18902439024390244, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"open\": 279.0, \"high\": 294.94, \"low\": 277.45, \"close\": 282.72, \"volume\": 68433, \"movement\": 1, \"positive_percent\": 0.31770889198755764, \"negative_percent\": 0.3752011155207552, \"litigious_percent\": 0.041617505094926524, \"superfluous_percent\": 0.025421001823447392, \"constraining_percent\": 0.0033251099431513467, \"uncertainty_percent\": 0.236726375630162, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"open\": 282.74, \"high\": 285.88, \"low\": 273.485, \"close\": 276.84, \"volume\": 30555, \"movement\": 0, \"positive_percent\": 0.32061068702290074, \"negative_percent\": 0.3753180661577608, \"litigious_percent\": 0.04452926208651401, \"superfluous_percent\": 0.025445292620865142, \"constraining_percent\": 0.005089058524173028, \"uncertainty_percent\": 0.22900763358778625, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"open\": 276.05, \"high\": 280.25, \"low\": 272.5, \"close\": 275.49, \"volume\": 14154, \"movement\": 0, \"positive_percent\": 0.3503759398496241, \"negative_percent\": 0.3849624060150376, \"litigious_percent\": 0.03157894736842105, \"superfluous_percent\": 0.006015037593984964, \"constraining_percent\": 0.003007518796992481, \"uncertainty_percent\": 0.22406015037593985, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"open\": 275.36, \"high\": 276.92, \"low\": 264.735, \"close\": 275.38, \"volume\": 25372, \"movement\": 1, \"positive_percent\": 0.3463338533541342, \"negative_percent\": 0.374414976599064, \"litigious_percent\": 0.0358814352574103, \"superfluous_percent\": 0.0202808112324493, \"constraining_percent\": 0.0015600624024961, \"uncertainty_percent\": 0.22152886115444614, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"open\": 275.15, \"high\": 281.01, \"low\": 273.01, \"close\": 278.77, \"volume\": 19730, \"movement\": 1, \"positive_percent\": 0.31841652323580033, \"negative_percent\": 0.38726333907056804, \"litigious_percent\": 0.03270223752151463, \"superfluous_percent\": 0.02065404475043029, \"constraining_percent\": 0.0034423407917383822, \"uncertainty_percent\": 0.2375215146299484, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"open\": 278.71, \"high\": 279.11, \"low\": 262.43, \"close\": 264.24, \"volume\": 31802, \"movement\": 0, \"positive_percent\": 0.3306122448979592, \"negative_percent\": 0.35374149659863946, \"litigious_percent\": 0.05578231292517007, \"superfluous_percent\": 0.024489795918367342, \"constraining_percent\": 0.005442176870748299, \"uncertainty_percent\": 0.22993197278911565, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"open\": 277.09, \"high\": 278.25, \"low\": 265.78, \"close\": 269.7, \"volume\": 34806, \"movement\": 0, \"positive_percent\": 0.3372531367805098, \"negative_percent\": 0.3648793113149159, \"litigious_percent\": 0.04056715242221347, \"superfluous_percent\": 0.02211219265177516, \"constraining_percent\": 0.0031508467900748325, \"uncertainty_percent\": 0.2320373600405109, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"open\": 269.7, \"high\": 271.1, \"low\": 226.19, \"close\": 251.6, \"volume\": 48179, \"movement\": 0, \"positive_percent\": 0.26752618855761484, \"negative_percent\": 0.467365028203062, \"litigious_percent\": 0.0257856567284448, \"superfluous_percent\": 0.029008863819500408, \"constraining_percent\": 0.0040290088638195, \"uncertainty_percent\": 0.2062852538275584, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"open\": 251.04, \"high\": 253.88, \"low\": 237.55, \"close\": 244.44, \"volume\": 11034, \"movement\": 0, \"positive_percent\": 0.3083333333333333, \"negative_percent\": 0.4197916666666667, \"litigious_percent\": 0.035416666666666666, \"superfluous_percent\": 0.0125, \"constraining_percent\": 0.003125, \"uncertainty_percent\": 0.22083333333333333, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"open\": 247.27, \"high\": 254.39, \"low\": 245.1, \"close\": 247.0, \"volume\": 7150, \"movement\": 0, \"positive_percent\": 0.35257082896117525, \"negative_percent\": 0.4018887722980063, \"litigious_percent\": 0.01888772298006296, \"superfluous_percent\": 0.02098635886673662, \"constraining_percent\": 0.002098635886673662, \"uncertainty_percent\": 0.20356768100734526, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"open\": 245.01, \"high\": 246.0, \"low\": 229.27, \"close\": 230.01, \"volume\": 8476, \"movement\": 0, \"positive_percent\": 0.2917115177610334, \"negative_percent\": 0.4208826695371367, \"litigious_percent\": 0.03444564047362755, \"superfluous_percent\": 0.03444564047362755, \"constraining_percent\": 0.005382131324004306, \"uncertainty_percent\": 0.2131324004305705, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"open\": 230.13, \"high\": 236.09, \"low\": 206.01, \"close\": 220.22, \"volume\": 34534, \"movement\": 0, \"positive_percent\": 0.2867647058823529, \"negative_percent\": 0.4506302521008403, \"litigious_percent\": 0.030462184873949583, \"superfluous_percent\": 0.018907563025210083, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21323529411764705, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"open\": 190.1, \"high\": 195.1, \"low\": 172.36, \"close\": 195.1, \"volume\": 39781, \"movement\": 1, \"positive_percent\": 0.31089869925108393, \"negative_percent\": 0.42037839968466695, \"litigious_percent\": 0.026704769412692158, \"superfluous_percent\": 0.020496649586125345, \"constraining_percent\": 0.002660622782814348, \"uncertainty_percent\": 0.21886085928261725, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"open\": 194.645, \"high\": 211.47, \"low\": 192.24, \"close\": 194.695, \"volume\": 28161, \"movement\": 1, \"positive_percent\": 0.3324287652645861, \"negative_percent\": 0.4070556309362279, \"litigious_percent\": 0.033921302578018994, \"superfluous_percent\": 0.01492537313432836, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21166892808683851, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"open\": 194.69, \"high\": 204.83, \"low\": 191.45, \"close\": 204.83, \"volume\": 12001, \"movement\": 1, \"positive_percent\": 0.25910364145658266, \"negative_percent\": 0.4201680672268908, \"litigious_percent\": 0.030812324929971987, \"superfluous_percent\": 0.02100840336134454, \"constraining_percent\": 0.0070028011204481795, \"uncertainty_percent\": 0.2619047619047619, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"open\": 204.21, \"high\": 219.96, \"low\": 200.03, \"close\": 214.31, \"volume\": 25041, \"movement\": 1, \"positive_percent\": 0.34508076358296624, \"negative_percent\": 0.3847283406754772, \"litigious_percent\": 0.041116005873715125, \"superfluous_percent\": 0.024963289280469897, \"constraining_percent\": 0.005873715124816446, \"uncertainty_percent\": 0.19823788546255505, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"open\": 214.64, \"high\": 220.63, \"low\": 204.22, \"close\": 204.56, \"volume\": 15119, \"movement\": 0, \"positive_percent\": 0.297979797979798, \"negative_percent\": 0.43265993265993263, \"litigious_percent\": 0.03872053872053872, \"superfluous_percent\": 0.006734006734006735, \"constraining_percent\": 0.005050505050505051, \"uncertainty_percent\": 0.21885521885521889, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"open\": 204.56, \"high\": 215.1, \"low\": 204.56, \"close\": 207.14, \"volume\": 12077, \"movement\": 1, \"positive_percent\": 0.32015065913371, \"negative_percent\": 0.3879472693032015, \"litigious_percent\": 0.032015065913371, \"superfluous_percent\": 0.02259887005649717, \"constraining_percent\": 0.003766478342749529, \"uncertainty_percent\": 0.2335216572504708, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"open\": 222.96, \"high\": 224.85, \"low\": 210.865, \"close\": 219.0, \"volume\": 30832, \"movement\": 0, \"positive_percent\": 0.310099573257468, \"negative_percent\": 0.4041251778093883, \"litigious_percent\": 0.030156472261735418, \"superfluous_percent\": 0.02432432432432433, \"constraining_percent\": 0.004836415362731153, \"uncertainty_percent\": 0.2264580369843528, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"open\": 219.0, \"high\": 221.15, \"low\": 213.5, \"close\": 218.93, \"volume\": 10413, \"movement\": 0, \"positive_percent\": 0.28771929824561404, \"negative_percent\": 0.4263157894736842, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.014035087719298246, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.2456140350877193, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"open\": 218.59, \"high\": 225.06, \"low\": 218.155, \"close\": 219.9, \"volume\": 5605, \"movement\": 1, \"positive_percent\": 0.3479212253829322, \"negative_percent\": 0.4135667396061269, \"litigious_percent\": 0.0262582056892779, \"superfluous_percent\": 0.01312910284463895, \"constraining_percent\": 0.002188183807439825, \"uncertainty_percent\": 0.19693654266958424, \"lead_movement\": 1.0}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"open\": 219.02, \"high\": 221.28, \"low\": 216.84, \"close\": 220.07, \"volume\": 5219, \"movement\": 1, \"positive_percent\": 0.3508771929824561, \"negative_percent\": 0.3859649122807017, \"litigious_percent\": 0.017543859649122806, \"superfluous_percent\": 0.02631578947368421, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.21929824561403508, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"open\": 219.69, \"high\": 223.0, \"low\": 213.0, \"close\": 215.25, \"volume\": 10146, \"movement\": 0, \"positive_percent\": 0.3333333333333333, \"negative_percent\": 0.42105263157894735, \"litigious_percent\": 0.02631578947368421, \"superfluous_percent\": 0.03508771929824561, \"constraining_percent\": 0.0, \"uncertainty_percent\": 0.18421052631578946, \"lead_movement\": 0.0}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"open\": 216.015, \"high\": 216.05, \"low\": 204.09, \"close\": 209.89, \"volume\": 18210, \"movement\": 0, \"positive_percent\": 0.4368932038834951, \"negative_percent\": 0.2815533980582524, \"litigious_percent\": 0.029126213592233014, \"superfluous_percent\": 0.03883495145631068, \"constraining_percent\": 0.019417475728155338, \"uncertainty_percent\": 0.1941747572815534, \"lead_movement\": null}], \"data-053772705c2387e0addddb774cbbd457\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"close\": -2.1124993371541687, \"positive_percent\": 1.3080074080347925, \"negative_percent\": -1.3377674224535485, \"litigious_percent\": 1.4224339191569986, \"superfluous_percent\": 0.038526592184344816, \"constraining_percent\": -0.19412900796853524, \"uncertainty_percent\": -0.09173455440168682}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"close\": -1.6962442564850746, \"positive_percent\": 1.757874554956677, \"negative_percent\": -0.5216755391242294, \"litigious_percent\": -1.8460228541959132, \"superfluous_percent\": -0.7899577108557307, \"constraining_percent\": 0.38320836426299093, \"uncertainty_percent\": -1.274999743955868}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"close\": -1.1709185298947262, \"positive_percent\": 0.4238166692356861, \"negative_percent\": 0.14796548373001014, \"litigious_percent\": -1.1411445492460637, \"superfluous_percent\": 0.7964385852423237, \"constraining_percent\": -0.5168124977691091, \"uncertainty_percent\": -0.8910043568340144}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"close\": -1.8086288057830648, \"positive_percent\": 0.5290533223282163, \"negative_percent\": 0.19380077710283605, \"litigious_percent\": -1.008149542028977, \"superfluous_percent\": 0.662011199653975, \"constraining_percent\": 0.03539342760224727, \"uncertainty_percent\": -1.3060307500659571}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"close\": -1.448998248029496, \"positive_percent\": 1.5537530768171326, \"negative_percent\": -1.1631091435070435, \"litigious_percent\": -0.339223782573124, \"superfluous_percent\": 0.21802355516073602, \"constraining_percent\": -0.25807603149082353, \"uncertainty_percent\": -0.268997739211543}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"close\": -1.301457506387007, \"positive_percent\": 0.9501277638386724, \"negative_percent\": -0.20334339584616914, \"litigious_percent\": -0.40281961155035795, \"superfluous_percent\": -0.9557344445572733, \"constraining_percent\": -0.31723997349610533, \"uncertainty_percent\": -0.8791808033739744}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"close\": -0.24821256360712518, \"positive_percent\": 0.5398517281675337, \"negative_percent\": -0.6081171779828584, \"litigious_percent\": 0.3021601506744932, \"superfluous_percent\": -0.18469317068097052, \"constraining_percent\": -0.0009613596291690321, \"uncertainty_percent\": 0.2771939921847942}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"close\": 0.06747275371581918, \"positive_percent\": 1.1968904461928098, \"negative_percent\": -0.8923743721124068, \"litigious_percent\": -0.3532670537117648, \"superfluous_percent\": 0.336000455407011, \"constraining_percent\": -0.46637381858585364, \"uncertainty_percent\": -0.1925271922776764}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"close\": 0.00508492057988305, \"positive_percent\": -0.4438025851521987, \"negative_percent\": 0.6269874971944394, \"litigious_percent\": -0.3985293081896588, \"superfluous_percent\": -0.08493541895052725, \"constraining_percent\": 0.08778110839592579, \"uncertainty_percent\": -0.3929179359722594}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"close\": -0.07156710535156652, \"positive_percent\": 0.3771426724666145, \"negative_percent\": -0.3500308580987487, \"litigious_percent\": 0.4335098064329245, \"superfluous_percent\": -0.8950567629852274, \"constraining_percent\": -0.7017562487515352, \"uncertainty_percent\": 0.2851801409646328}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"close\": -0.05197185060217317, \"positive_percent\": 0.20108512931263212, \"negative_percent\": -0.8188501716731507, \"litigious_percent\": 2.0974235739851985, \"superfluous_percent\": -0.35442653414493963, \"constraining_percent\": 0.29162671858117833, \"uncertainty_percent\": 0.6743165919824023}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"close\": 0.2534835910795434, \"positive_percent\": 1.2238809327582183, \"negative_percent\": -0.7000663022721972, \"litigious_percent\": -0.07398646870944633, \"superfluous_percent\": 0.6381769118653743, \"constraining_percent\": 0.431513080102912, \"uncertainty_percent\": -1.0611520539018309}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"close\": 1.6078614928758344, \"positive_percent\": 0.3504724513825006, \"negative_percent\": -0.43687942649011147, \"litigious_percent\": -0.11451120896677974, \"superfluous_percent\": 0.08312666001396807, \"constraining_percent\": -0.16120002405870087, \"uncertainty_percent\": 0.3713686161107828}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"close\": 2.6406466843732623, \"positive_percent\": -1.47077888225426, \"negative_percent\": 2.5404862330242852, \"litigious_percent\": -0.6243254909294675, \"superfluous_percent\": -0.7714034088747557, \"constraining_percent\": -0.5859443473108152, \"uncertainty_percent\": -2.4032574232696384}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"close\": 0.8113720204152075, \"positive_percent\": -2.132626323885716, \"negative_percent\": 3.1421634926519224, \"litigious_percent\": -1.5432353353288792, \"superfluous_percent\": -0.3946115960899595, \"constraining_percent\": -0.2936940972418736, \"uncertainty_percent\": -2.255652617076424}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"close\": 0.8194406547237804, \"positive_percent\": -2.1463728329382894, \"negative_percent\": 2.1973332773545855, \"litigious_percent\": -0.2718503868824127, \"superfluous_percent\": 1.256856452974408, \"constraining_percent\": 0.09543800986187877, \"uncertainty_percent\": -1.186602145103405}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"close\": 0.6782395543237422, \"positive_percent\": -1.271260493845782, \"negative_percent\": 1.6353264393179872, \"litigious_percent\": -1.6310467448207555, \"superfluous_percent\": 1.4260158142248975, \"constraining_percent\": -0.34508535462821743, \"uncertainty_percent\": -1.0117540279340227}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"close\": 0.7254986981311017, \"positive_percent\": -0.5640545332911348, \"negative_percent\": 0.6864022087652758, \"litigious_percent\": 0.22205267792730407, \"superfluous_percent\": 0.4483596274255952, \"constraining_percent\": -0.9289465162007994, \"uncertainty_percent\": -0.5969616562364489}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"close\": 1.054871877227519, \"positive_percent\": -1.112183444168155, \"negative_percent\": 0.7216295739143861, \"litigious_percent\": -0.10493028170856454, \"superfluous_percent\": 0.8970582332185704, \"constraining_percent\": 0.08656045252214441, \"uncertainty_percent\": 0.2626826547565435}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"close\": 0.7903359381107113, \"positive_percent\": 0.24351222734497038, \"negative_percent\": -0.6974162159868128, \"litigious_percent\": 0.84426128794556, \"superfluous_percent\": 0.492014825214196, \"constraining_percent\": 0.3731895316177118, \"uncertainty_percent\": 0.5564095332129168}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"close\": 0.5364621229016618, \"positive_percent\": -0.4321555393091087, \"negative_percent\": 0.20377305039070728, \"litigious_percent\": -0.7883584869898351, \"superfluous_percent\": 1.4542844188246105, \"constraining_percent\": 0.41097706503840703, \"uncertainty_percent\": 0.1796624880095898}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"close\": 0.6678655959270042, \"positive_percent\": 0.528783466705642, \"negative_percent\": -0.5810146383548227, \"litigious_percent\": -1.0034030963959473, \"superfluous_percent\": -1.2167854726041645, \"constraining_percent\": -0.02333419570595225, \"uncertainty_percent\": 1.1704299889006406}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"close\": 0.703742202049055, \"positive_percent\": 0.3733829548206085, \"negative_percent\": -0.7313193448335582, \"litigious_percent\": 2.1470472480819836, \"superfluous_percent\": 0.4398926429761296, \"constraining_percent\": 1.023467304549684, \"uncertainty_percent\": -0.2813493897608828}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"close\": 0.5053402477114497, \"positive_percent\": 1.0348598412402845, \"negative_percent\": -0.22899581302546118, \"litigious_percent\": -0.4258603718243554, \"superfluous_percent\": -0.20468236221642205, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.1069625473425797}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"close\": 1.2934729203524835, \"positive_percent\": -0.26989904092421, \"negative_percent\": -0.6224015453177404, \"litigious_percent\": 1.2143897160207877, \"superfluous_percent\": 0.40690745846421444, \"constraining_percent\": -0.03774446600416683, \"uncertainty_percent\": 1.3386310626569353}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"close\": 1.1240315998724353, \"positive_percent\": -0.19594161726960954, \"negative_percent\": -0.6198584239860975, \"litigious_percent\": 1.551238900408911, \"superfluous_percent\": 0.41054904801385983, \"constraining_percent\": 0.56900889782834, \"uncertainty_percent\": 0.942905265015268}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"close\": 1.0851292558846706, \"positive_percent\": 0.5626789560928337, \"negative_percent\": -0.41013980210739015, \"litigious_percent\": 0.05307028161191413, \"superfluous_percent\": -2.5023653547520164, \"constraining_percent\": -0.14698772758705336, \"uncertainty_percent\": 0.6892568428270232}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"close\": 1.0819594352634447, \"positive_percent\": 0.4596591701484616, \"negative_percent\": -0.63949633601385, \"litigious_percent\": 0.550807400620481, \"superfluous_percent\": -0.3636915473010804, \"constraining_percent\": -0.6448758439474906, \"uncertainty_percent\": 0.5594822706573539}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"close\": 1.1796475434993896, \"positive_percent\": -0.25186379605677556, \"negative_percent\": -0.3601054278959803, \"litigious_percent\": 0.18301909705014627, \"superfluous_percent\": -0.30773771197479366, \"constraining_percent\": 0.0025799586930226877, \"uncertainty_percent\": 1.3793963859698544}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"close\": 0.7609430559866222, \"positive_percent\": 0.05896592925331201, \"negative_percent\": -1.089046414016831, \"litigious_percent\": 2.8530580452863687, \"superfluous_percent\": 0.26730439668783756, \"constraining_percent\": 0.690472611068451, \"uncertainty_percent\": 0.9902944465333682}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"close\": 0.9182814250038077, \"positive_percent\": 0.22822090709295745, \"negative_percent\": -0.8468518016737706, \"litigious_percent\": 1.0928787375478275, \"superfluous_percent\": -0.08913738906012825, \"constraining_percent\": -0.09768655017761382, \"uncertainty_percent\": 1.0982338030799368}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"close\": 0.3967018500567256, \"positive_percent\": -1.5488947702909557, \"negative_percent\": 1.3817261648955461, \"litigious_percent\": -0.6171316729596487, \"superfluous_percent\": 0.9447869082697296, \"constraining_percent\": 0.20437882631204116, \"uncertainty_percent\": -0.22202961758192985}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"close\": 0.19037534416605667, \"positive_percent\": -0.5088518804403341, \"negative_percent\": 0.34723132468908924, \"litigious_percent\": 0.4970402348942453, \"superfluous_percent\": -1.5301629638032883, \"constraining_percent\": -0.10657718734862125, \"uncertainty_percent\": 0.5238238304243745}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"close\": 0.26414571498730155, \"positive_percent\": 0.6186196210676993, \"negative_percent\": -0.042071664442161885, \"litigious_percent\": -1.4151252431026464, \"superfluous_percent\": -0.25791836712872923, \"constraining_percent\": -0.45962028904551205, \"uncertainty_percent\": -0.36135460940367536}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"close\": -0.22544748823650693, \"positive_percent\": -0.9324885057762341, \"negative_percent\": 0.3709554594506877, \"litigious_percent\": 0.3847062104238857, \"superfluous_percent\": 1.759849036817153, \"constraining_percent\": 0.6698184730385445, \"uncertainty_percent\": 0.12901107482245153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"close\": -0.5075615235255639, \"positive_percent\": -1.058566832258698, \"negative_percent\": 1.0178242044146923, \"litigious_percent\": -0.07612337586183869, \"superfluous_percent\": -0.569564011450709, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.1342862461090579}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"close\": -1.2314332872090286, \"positive_percent\": -0.4434689530807786, \"negative_percent\": 0.35998998331857646, \"litigious_percent\": -0.5108033086957388, \"superfluous_percent\": -0.3313338325813071, \"constraining_percent\": -0.26631111703685273, \"uncertainty_percent\": 0.42269869076277483}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"close\": -1.2431039904053582, \"positive_percent\": 0.10526319170484486, \"negative_percent\": 0.07028299011020143, \"litigious_percent\": 0.3240477169473289, \"superfluous_percent\": -1.166559690182187, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.053981522419945346}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"close\": -0.9510482449860937, \"positive_percent\": -1.7635584100777033, \"negative_percent\": 0.35541625055573844, \"litigious_percent\": -0.03561711361759298, \"superfluous_percent\": -0.25461353526953495, \"constraining_percent\": 1.2272875859332686, \"uncertainty_percent\": 2.629480910617308}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"close\": -0.6778673405386719, \"positive_percent\": 0.4277219416554931, \"negative_percent\": -0.4152296124177505, \"litigious_percent\": 1.1563733348033982, \"superfluous_percent\": 0.338288829582542, \"constraining_percent\": 0.8389107742299865, \"uncertainty_percent\": -0.6346034861830764}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"close\": -0.9588287137836472, \"positive_percent\": -0.7727302009757318, \"negative_percent\": 0.6270550399473346, \"litigious_percent\": 0.8792515972726556, \"superfluous_percent\": -2.3945800703995297, \"constraining_percent\": 0.5557474852865275, \"uncertainty_percent\": 0.4224095163585772}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"close\": -0.8844820119403619, \"positive_percent\": -0.2076662487750836, \"negative_percent\": -0.34523319112584494, \"litigious_percent\": 0.10352304143608938, \"superfluous_percent\": -0.016176451606952285, \"constraining_percent\": 0.11407501673294108, \"uncertainty_percent\": 1.1743310083141587}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"close\": -0.5427177158700633, \"positive_percent\": -0.463836104772548, \"negative_percent\": 0.006559541918229539, \"litigious_percent\": -0.11149000995219245, \"superfluous_percent\": 0.24249748659480447, \"constraining_percent\": 0.48210608801664484, \"uncertainty_percent\": 0.8121921068323511}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"close\": -0.5447348744472066, \"positive_percent\": -1.0342373427643439, \"negative_percent\": 0.4891000336212831, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": -1.3000280983130097, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 1.7942851198466558}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"close\": -0.5167828198782193, \"positive_percent\": 0.5001161783800562, \"negative_percent\": 0.21186870332243668, \"litigious_percent\": -0.5624644282342224, \"superfluous_percent\": -1.4358501133319677, \"constraining_percent\": -0.42881808611644145, \"uncertainty_percent\": -0.7013209528280824}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"close\": -0.5118840061908714, \"positive_percent\": 0.5754542864836891, \"negative_percent\": -0.3883400485139699, \"litigious_percent\": -1.5705912618206086, \"superfluous_percent\": 0.541050825609219, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.44512268860175513}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"close\": -0.6507797825027462, \"positive_percent\": 0.12831772280367976, \"negative_percent\": 0.3746513272558152, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": 1.8561071998393825, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.3537605530581107}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"close\": -0.8052364964097278, \"positive_percent\": 2.7677257880215986, \"negative_percent\": -2.6587949676735683, \"litigious_percent\": -0.230676395881147, \"superfluous_percent\": 2.417878854850327, \"constraining_percent\": 5.497619306571862, \"uncertainty_percent\": -0.8429126421983911}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.VConcatChart(...)"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "\n",
    "##close original \n",
    "upper = alt.Chart(source).mark_line(point=False, strokeWidth=5).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('close:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "\n",
    "## sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "#close line\n",
    "close = alt.Chart(df).mark_line(point=False, strokeWidth=5).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('close:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "# positive line\n",
    "positive = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('positive_percent:Q'),\n",
    "    color=alt.value('#31a354')\n",
    ")\n",
    "\n",
    "#negative line\n",
    "negative = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('negative_percent:Q'),\n",
    "    color=alt.value('#756bb1')\n",
    ")\n",
    "\n",
    "\n",
    "#uncertainty\n",
    "uncertainty = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('uncertainty_percent:Q'),\n",
    "    color=alt.value('#de2d26')\n",
    ")\n",
    "\n",
    "#superfluous\n",
    "superfluous = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('superfluous_percent:Q'),\n",
    "    color=alt.value('#feb24c')\n",
    ")\n",
    "\n",
    "\n",
    "\n",
    "lower =alt.layer(close,positive,negative,uncertainty,superfluous)\n",
    "\n",
    "alt.vconcat(upper, lower)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 43,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-ae3f91a394cd4e5bb4bf2d39a7762ab6\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-ae3f91a394cd4e5bb4bf2d39a7762ab6\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-ae3f91a394cd4e5bb4bf2d39a7762ab6\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"vconcat\": [{\"layer\": [{\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 5}, \"encoding\": {\"color\": {\"value\": \"#636363\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"close\"}}}, {\"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#31a354\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"positive_percent\"}}}]}], \"data\": {\"name\": \"data-053772705c2387e0addddb774cbbd457\"}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-053772705c2387e0addddb774cbbd457\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"close\": -2.1124993371541687, \"positive_percent\": 1.3080074080347925, \"negative_percent\": -1.3377674224535485, \"litigious_percent\": 1.4224339191569986, \"superfluous_percent\": 0.038526592184344816, \"constraining_percent\": -0.19412900796853524, \"uncertainty_percent\": -0.09173455440168682}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"close\": -1.6962442564850746, \"positive_percent\": 1.757874554956677, \"negative_percent\": -0.5216755391242294, \"litigious_percent\": -1.8460228541959132, \"superfluous_percent\": -0.7899577108557307, \"constraining_percent\": 0.38320836426299093, \"uncertainty_percent\": -1.274999743955868}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"close\": -1.1709185298947262, \"positive_percent\": 0.4238166692356861, \"negative_percent\": 0.14796548373001014, \"litigious_percent\": -1.1411445492460637, \"superfluous_percent\": 0.7964385852423237, \"constraining_percent\": -0.5168124977691091, \"uncertainty_percent\": -0.8910043568340144}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"close\": -1.8086288057830648, \"positive_percent\": 0.5290533223282163, \"negative_percent\": 0.19380077710283605, \"litigious_percent\": -1.008149542028977, \"superfluous_percent\": 0.662011199653975, \"constraining_percent\": 0.03539342760224727, \"uncertainty_percent\": -1.3060307500659571}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"close\": -1.448998248029496, \"positive_percent\": 1.5537530768171326, \"negative_percent\": -1.1631091435070435, \"litigious_percent\": -0.339223782573124, \"superfluous_percent\": 0.21802355516073602, \"constraining_percent\": -0.25807603149082353, \"uncertainty_percent\": -0.268997739211543}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"close\": -1.301457506387007, \"positive_percent\": 0.9501277638386724, \"negative_percent\": -0.20334339584616914, \"litigious_percent\": -0.40281961155035795, \"superfluous_percent\": -0.9557344445572733, \"constraining_percent\": -0.31723997349610533, \"uncertainty_percent\": -0.8791808033739744}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"close\": -0.24821256360712518, \"positive_percent\": 0.5398517281675337, \"negative_percent\": -0.6081171779828584, \"litigious_percent\": 0.3021601506744932, \"superfluous_percent\": -0.18469317068097052, \"constraining_percent\": -0.0009613596291690321, \"uncertainty_percent\": 0.2771939921847942}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"close\": 0.06747275371581918, \"positive_percent\": 1.1968904461928098, \"negative_percent\": -0.8923743721124068, \"litigious_percent\": -0.3532670537117648, \"superfluous_percent\": 0.336000455407011, \"constraining_percent\": -0.46637381858585364, \"uncertainty_percent\": -0.1925271922776764}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"close\": 0.00508492057988305, \"positive_percent\": -0.4438025851521987, \"negative_percent\": 0.6269874971944394, \"litigious_percent\": -0.3985293081896588, \"superfluous_percent\": -0.08493541895052725, \"constraining_percent\": 0.08778110839592579, \"uncertainty_percent\": -0.3929179359722594}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"close\": -0.07156710535156652, \"positive_percent\": 0.3771426724666145, \"negative_percent\": -0.3500308580987487, \"litigious_percent\": 0.4335098064329245, \"superfluous_percent\": -0.8950567629852274, \"constraining_percent\": -0.7017562487515352, \"uncertainty_percent\": 0.2851801409646328}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"close\": -0.05197185060217317, \"positive_percent\": 0.20108512931263212, \"negative_percent\": -0.8188501716731507, \"litigious_percent\": 2.0974235739851985, \"superfluous_percent\": -0.35442653414493963, \"constraining_percent\": 0.29162671858117833, \"uncertainty_percent\": 0.6743165919824023}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"close\": 0.2534835910795434, \"positive_percent\": 1.2238809327582183, \"negative_percent\": -0.7000663022721972, \"litigious_percent\": -0.07398646870944633, \"superfluous_percent\": 0.6381769118653743, \"constraining_percent\": 0.431513080102912, \"uncertainty_percent\": -1.0611520539018309}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"close\": 1.6078614928758344, \"positive_percent\": 0.3504724513825006, \"negative_percent\": -0.43687942649011147, \"litigious_percent\": -0.11451120896677974, \"superfluous_percent\": 0.08312666001396807, \"constraining_percent\": -0.16120002405870087, \"uncertainty_percent\": 0.3713686161107828}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"close\": 2.6406466843732623, \"positive_percent\": -1.47077888225426, \"negative_percent\": 2.5404862330242852, \"litigious_percent\": -0.6243254909294675, \"superfluous_percent\": -0.7714034088747557, \"constraining_percent\": -0.5859443473108152, \"uncertainty_percent\": -2.4032574232696384}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"close\": 0.8113720204152075, \"positive_percent\": -2.132626323885716, \"negative_percent\": 3.1421634926519224, \"litigious_percent\": -1.5432353353288792, \"superfluous_percent\": -0.3946115960899595, \"constraining_percent\": -0.2936940972418736, \"uncertainty_percent\": -2.255652617076424}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"close\": 0.8194406547237804, \"positive_percent\": -2.1463728329382894, \"negative_percent\": 2.1973332773545855, \"litigious_percent\": -0.2718503868824127, \"superfluous_percent\": 1.256856452974408, \"constraining_percent\": 0.09543800986187877, \"uncertainty_percent\": -1.186602145103405}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"close\": 0.6782395543237422, \"positive_percent\": -1.271260493845782, \"negative_percent\": 1.6353264393179872, \"litigious_percent\": -1.6310467448207555, \"superfluous_percent\": 1.4260158142248975, \"constraining_percent\": -0.34508535462821743, \"uncertainty_percent\": -1.0117540279340227}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"close\": 0.7254986981311017, \"positive_percent\": -0.5640545332911348, \"negative_percent\": 0.6864022087652758, \"litigious_percent\": 0.22205267792730407, \"superfluous_percent\": 0.4483596274255952, \"constraining_percent\": -0.9289465162007994, \"uncertainty_percent\": -0.5969616562364489}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"close\": 1.054871877227519, \"positive_percent\": -1.112183444168155, \"negative_percent\": 0.7216295739143861, \"litigious_percent\": -0.10493028170856454, \"superfluous_percent\": 0.8970582332185704, \"constraining_percent\": 0.08656045252214441, \"uncertainty_percent\": 0.2626826547565435}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"close\": 0.7903359381107113, \"positive_percent\": 0.24351222734497038, \"negative_percent\": -0.6974162159868128, \"litigious_percent\": 0.84426128794556, \"superfluous_percent\": 0.492014825214196, \"constraining_percent\": 0.3731895316177118, \"uncertainty_percent\": 0.5564095332129168}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"close\": 0.5364621229016618, \"positive_percent\": -0.4321555393091087, \"negative_percent\": 0.20377305039070728, \"litigious_percent\": -0.7883584869898351, \"superfluous_percent\": 1.4542844188246105, \"constraining_percent\": 0.41097706503840703, \"uncertainty_percent\": 0.1796624880095898}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"close\": 0.6678655959270042, \"positive_percent\": 0.528783466705642, \"negative_percent\": -0.5810146383548227, \"litigious_percent\": -1.0034030963959473, \"superfluous_percent\": -1.2167854726041645, \"constraining_percent\": -0.02333419570595225, \"uncertainty_percent\": 1.1704299889006406}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"close\": 0.703742202049055, \"positive_percent\": 0.3733829548206085, \"negative_percent\": -0.7313193448335582, \"litigious_percent\": 2.1470472480819836, \"superfluous_percent\": 0.4398926429761296, \"constraining_percent\": 1.023467304549684, \"uncertainty_percent\": -0.2813493897608828}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"close\": 0.5053402477114497, \"positive_percent\": 1.0348598412402845, \"negative_percent\": -0.22899581302546118, \"litigious_percent\": -0.4258603718243554, \"superfluous_percent\": -0.20468236221642205, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.1069625473425797}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"close\": 1.2934729203524835, \"positive_percent\": -0.26989904092421, \"negative_percent\": -0.6224015453177404, \"litigious_percent\": 1.2143897160207877, \"superfluous_percent\": 0.40690745846421444, \"constraining_percent\": -0.03774446600416683, \"uncertainty_percent\": 1.3386310626569353}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"close\": 1.1240315998724353, \"positive_percent\": -0.19594161726960954, \"negative_percent\": -0.6198584239860975, \"litigious_percent\": 1.551238900408911, \"superfluous_percent\": 0.41054904801385983, \"constraining_percent\": 0.56900889782834, \"uncertainty_percent\": 0.942905265015268}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"close\": 1.0851292558846706, \"positive_percent\": 0.5626789560928337, \"negative_percent\": -0.41013980210739015, \"litigious_percent\": 0.05307028161191413, \"superfluous_percent\": -2.5023653547520164, \"constraining_percent\": -0.14698772758705336, \"uncertainty_percent\": 0.6892568428270232}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"close\": 1.0819594352634447, \"positive_percent\": 0.4596591701484616, \"negative_percent\": -0.63949633601385, \"litigious_percent\": 0.550807400620481, \"superfluous_percent\": -0.3636915473010804, \"constraining_percent\": -0.6448758439474906, \"uncertainty_percent\": 0.5594822706573539}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"close\": 1.1796475434993896, \"positive_percent\": -0.25186379605677556, \"negative_percent\": -0.3601054278959803, \"litigious_percent\": 0.18301909705014627, \"superfluous_percent\": -0.30773771197479366, \"constraining_percent\": 0.0025799586930226877, \"uncertainty_percent\": 1.3793963859698544}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"close\": 0.7609430559866222, \"positive_percent\": 0.05896592925331201, \"negative_percent\": -1.089046414016831, \"litigious_percent\": 2.8530580452863687, \"superfluous_percent\": 0.26730439668783756, \"constraining_percent\": 0.690472611068451, \"uncertainty_percent\": 0.9902944465333682}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"close\": 0.9182814250038077, \"positive_percent\": 0.22822090709295745, \"negative_percent\": -0.8468518016737706, \"litigious_percent\": 1.0928787375478275, \"superfluous_percent\": -0.08913738906012825, \"constraining_percent\": -0.09768655017761382, \"uncertainty_percent\": 1.0982338030799368}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"close\": 0.3967018500567256, \"positive_percent\": -1.5488947702909557, \"negative_percent\": 1.3817261648955461, \"litigious_percent\": -0.6171316729596487, \"superfluous_percent\": 0.9447869082697296, \"constraining_percent\": 0.20437882631204116, \"uncertainty_percent\": -0.22202961758192985}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"close\": 0.19037534416605667, \"positive_percent\": -0.5088518804403341, \"negative_percent\": 0.34723132468908924, \"litigious_percent\": 0.4970402348942453, \"superfluous_percent\": -1.5301629638032883, \"constraining_percent\": -0.10657718734862125, \"uncertainty_percent\": 0.5238238304243745}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"close\": 0.26414571498730155, \"positive_percent\": 0.6186196210676993, \"negative_percent\": -0.042071664442161885, \"litigious_percent\": -1.4151252431026464, \"superfluous_percent\": -0.25791836712872923, \"constraining_percent\": -0.45962028904551205, \"uncertainty_percent\": -0.36135460940367536}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"close\": -0.22544748823650693, \"positive_percent\": -0.9324885057762341, \"negative_percent\": 0.3709554594506877, \"litigious_percent\": 0.3847062104238857, \"superfluous_percent\": 1.759849036817153, \"constraining_percent\": 0.6698184730385445, \"uncertainty_percent\": 0.12901107482245153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"close\": -0.5075615235255639, \"positive_percent\": -1.058566832258698, \"negative_percent\": 1.0178242044146923, \"litigious_percent\": -0.07612337586183869, \"superfluous_percent\": -0.569564011450709, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.1342862461090579}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"close\": -1.2314332872090286, \"positive_percent\": -0.4434689530807786, \"negative_percent\": 0.35998998331857646, \"litigious_percent\": -0.5108033086957388, \"superfluous_percent\": -0.3313338325813071, \"constraining_percent\": -0.26631111703685273, \"uncertainty_percent\": 0.42269869076277483}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"close\": -1.2431039904053582, \"positive_percent\": 0.10526319170484486, \"negative_percent\": 0.07028299011020143, \"litigious_percent\": 0.3240477169473289, \"superfluous_percent\": -1.166559690182187, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.053981522419945346}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"close\": -0.9510482449860937, \"positive_percent\": -1.7635584100777033, \"negative_percent\": 0.35541625055573844, \"litigious_percent\": -0.03561711361759298, \"superfluous_percent\": -0.25461353526953495, \"constraining_percent\": 1.2272875859332686, \"uncertainty_percent\": 2.629480910617308}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"close\": -0.6778673405386719, \"positive_percent\": 0.4277219416554931, \"negative_percent\": -0.4152296124177505, \"litigious_percent\": 1.1563733348033982, \"superfluous_percent\": 0.338288829582542, \"constraining_percent\": 0.8389107742299865, \"uncertainty_percent\": -0.6346034861830764}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"close\": -0.9588287137836472, \"positive_percent\": -0.7727302009757318, \"negative_percent\": 0.6270550399473346, \"litigious_percent\": 0.8792515972726556, \"superfluous_percent\": -2.3945800703995297, \"constraining_percent\": 0.5557474852865275, \"uncertainty_percent\": 0.4224095163585772}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"close\": -0.8844820119403619, \"positive_percent\": -0.2076662487750836, \"negative_percent\": -0.34523319112584494, \"litigious_percent\": 0.10352304143608938, \"superfluous_percent\": -0.016176451606952285, \"constraining_percent\": 0.11407501673294108, \"uncertainty_percent\": 1.1743310083141587}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"close\": -0.5427177158700633, \"positive_percent\": -0.463836104772548, \"negative_percent\": 0.006559541918229539, \"litigious_percent\": -0.11149000995219245, \"superfluous_percent\": 0.24249748659480447, \"constraining_percent\": 0.48210608801664484, \"uncertainty_percent\": 0.8121921068323511}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"close\": -0.5447348744472066, \"positive_percent\": -1.0342373427643439, \"negative_percent\": 0.4891000336212831, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": -1.3000280983130097, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 1.7942851198466558}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"close\": -0.5167828198782193, \"positive_percent\": 0.5001161783800562, \"negative_percent\": 0.21186870332243668, \"litigious_percent\": -0.5624644282342224, \"superfluous_percent\": -1.4358501133319677, \"constraining_percent\": -0.42881808611644145, \"uncertainty_percent\": -0.7013209528280824}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"close\": -0.5118840061908714, \"positive_percent\": 0.5754542864836891, \"negative_percent\": -0.3883400485139699, \"litigious_percent\": -1.5705912618206086, \"superfluous_percent\": 0.541050825609219, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.44512268860175513}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"close\": -0.6507797825027462, \"positive_percent\": 0.12831772280367976, \"negative_percent\": 0.3746513272558152, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": 1.8561071998393825, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.3537605530581107}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"close\": -0.8052364964097278, \"positive_percent\": 2.7677257880215986, \"negative_percent\": -2.6587949676735683, \"litigious_percent\": -0.230676395881147, \"superfluous_percent\": 2.417878854850327, \"constraining_percent\": 5.497619306571862, \"uncertainty_percent\": -0.8429126421983911}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.VConcatChart(...)"
      ]
     },
     "execution_count": 43,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "\n",
    "##close original \n",
    "upper = alt.Chart(source).mark_line(point=False, strokeWidth=5).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('close:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "\n",
    "## sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "#close line\n",
    "close = alt.Chart(df).mark_line(point=False, strokeWidth=5).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('close:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "# positive line\n",
    "positive = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('positive_percent:Q'),\n",
    "    color=alt.value('#31a354')\n",
    ")\n",
    "\n",
    "#negative line\n",
    "negative = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('negative_percent:Q'),\n",
    "    color=alt.value('#756bb1')\n",
    ")\n",
    "\n",
    "\n",
    "#uncertainty\n",
    "uncertainty = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('uncertainty_percent:Q'),\n",
    "    color=alt.value('#de2d26')\n",
    ")\n",
    "\n",
    "#superfluous\n",
    "superfluous = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('superfluous_percent:Q'),\n",
    "    color=alt.value('#feb24c')\n",
    ")\n",
    "\n",
    "\n",
    "\n",
    "lower =alt.layer(close,positive)\n",
    "\n",
    "alt.vconcat(lower)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>created_utc</th>\n",
       "      <th>close</th>\n",
       "      <th>positive_percent</th>\n",
       "      <th>negative_percent</th>\n",
       "      <th>litigious_percent</th>\n",
       "      <th>superfluous_percent</th>\n",
       "      <th>constraining_percent</th>\n",
       "      <th>uncertainty_percent</th>\n",
       "      <th>lead_movement</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2021-03-08T15:00:00Z</td>\n",
       "      <td>9.110</td>\n",
       "      <td>0.470862</td>\n",
       "      <td>0.307692</td>\n",
       "      <td>0.027972</td>\n",
       "      <td>0.014763</td>\n",
       "      <td>0.003108</td>\n",
       "      <td>0.175602</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2021-03-08T16:00:00Z</td>\n",
       "      <td>8.945</td>\n",
       "      <td>0.399209</td>\n",
       "      <td>0.332016</td>\n",
       "      <td>0.007905</td>\n",
       "      <td>0.027668</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.233202</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>2021-03-08T17:00:00Z</td>\n",
       "      <td>9.120</td>\n",
       "      <td>0.448413</td>\n",
       "      <td>0.341270</td>\n",
       "      <td>0.023810</td>\n",
       "      <td>0.019841</td>\n",
       "      <td>0.007937</td>\n",
       "      <td>0.158730</td>\n",
       "      <td>0.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>2021-03-08T18:00:00Z</td>\n",
       "      <td>8.920</td>\n",
       "      <td>0.437500</td>\n",
       "      <td>0.350962</td>\n",
       "      <td>0.009615</td>\n",
       "      <td>0.014423</td>\n",
       "      <td>0.004808</td>\n",
       "      <td>0.182692</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>2021-03-08T19:00:00Z</td>\n",
       "      <td>9.130</td>\n",
       "      <td>0.507389</td>\n",
       "      <td>0.305419</td>\n",
       "      <td>0.004926</td>\n",
       "      <td>0.004926</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.177340</td>\n",
       "      <td>1.0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "            created_utc  close  positive_percent  negative_percent  \\\n",
       "0  2021-03-08T15:00:00Z  9.110          0.470862          0.307692   \n",
       "1  2021-03-08T16:00:00Z  8.945          0.399209          0.332016   \n",
       "2  2021-03-08T17:00:00Z  9.120          0.448413          0.341270   \n",
       "3  2021-03-08T18:00:00Z  8.920          0.437500          0.350962   \n",
       "4  2021-03-08T19:00:00Z  9.130          0.507389          0.305419   \n",
       "\n",
       "   litigious_percent  superfluous_percent  constraining_percent  \\\n",
       "0           0.027972             0.014763              0.003108   \n",
       "1           0.007905             0.027668              0.000000   \n",
       "2           0.023810             0.019841              0.007937   \n",
       "3           0.009615             0.014423              0.004808   \n",
       "4           0.004926             0.004926              0.000000   \n",
       "\n",
       "   uncertainty_percent  lead_movement  \n",
       "0             0.175602            0.0  \n",
       "1             0.233202            1.0  \n",
       "2             0.158730            0.0  \n",
       "3             0.182692            1.0  \n",
       "4             0.177340            1.0  "
      ]
     },
     "execution_count": 14,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12,13]] \n",
    "df.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 44,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-3809176795e44724a4a14b781d5886e8\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-3809176795e44724a4a14b781d5886e8\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-3809176795e44724a4a14b781d5886e8\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"vconcat\": [{\"layer\": [{\"data\": {\"name\": \"data-2832c6c9014668eef8d8829f40d61113\"}, \"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#de2d26\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"uncertainty_percent\"}}}, {\"data\": {\"name\": \"data-053772705c2387e0addddb774cbbd457\"}, \"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#31a354\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"positive_percent\"}}}, {\"data\": {\"name\": \"data-053772705c2387e0addddb774cbbd457\"}, \"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 1}, \"encoding\": {\"color\": {\"value\": \"#756bb1\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"negative_percent\"}}}, {\"data\": {\"name\": \"data-2832c6c9014668eef8d8829f40d61113\"}, \"mark\": {\"type\": \"line\", \"point\": false, \"strokeWidth\": 3}, \"encoding\": {\"color\": {\"value\": \"#636363\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"lead_movement\"}}}]}], \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-2832c6c9014668eef8d8829f40d61113\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"close\": -2.1124993371541687, \"positive_percent\": 1.3080074080347925, \"negative_percent\": -1.3377674224535485, \"litigious_percent\": 1.4224339191569986, \"superfluous_percent\": 0.038526592184344816, \"constraining_percent\": -0.19412900796853524, \"uncertainty_percent\": -0.09173455440168682, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"close\": -1.6962442564850746, \"positive_percent\": 1.757874554956677, \"negative_percent\": -0.5216755391242294, \"litigious_percent\": -1.8460228541959132, \"superfluous_percent\": -0.7899577108557307, \"constraining_percent\": 0.38320836426299093, \"uncertainty_percent\": -1.274999743955868, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"close\": -1.1709185298947262, \"positive_percent\": 0.4238166692356861, \"negative_percent\": 0.14796548373001014, \"litigious_percent\": -1.1411445492460637, \"superfluous_percent\": 0.7964385852423237, \"constraining_percent\": -0.5168124977691091, \"uncertainty_percent\": -0.8910043568340144, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"close\": -1.8086288057830648, \"positive_percent\": 0.5290533223282163, \"negative_percent\": 0.19380077710283605, \"litigious_percent\": -1.008149542028977, \"superfluous_percent\": 0.662011199653975, \"constraining_percent\": 0.03539342760224727, \"uncertainty_percent\": -1.3060307500659571, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"close\": -1.448998248029496, \"positive_percent\": 1.5537530768171326, \"negative_percent\": -1.1631091435070435, \"litigious_percent\": -0.339223782573124, \"superfluous_percent\": 0.21802355516073602, \"constraining_percent\": -0.25807603149082353, \"uncertainty_percent\": -0.268997739211543, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"close\": -1.301457506387007, \"positive_percent\": 0.9501277638386724, \"negative_percent\": -0.20334339584616914, \"litigious_percent\": -0.40281961155035795, \"superfluous_percent\": -0.9557344445572733, \"constraining_percent\": -0.31723997349610533, \"uncertainty_percent\": -0.8791808033739744, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"close\": -0.24821256360712518, \"positive_percent\": 0.5398517281675337, \"negative_percent\": -0.6081171779828584, \"litigious_percent\": 0.3021601506744932, \"superfluous_percent\": -0.18469317068097052, \"constraining_percent\": -0.0009613596291690321, \"uncertainty_percent\": 0.2771939921847942, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"close\": 0.06747275371581918, \"positive_percent\": 1.1968904461928098, \"negative_percent\": -0.8923743721124068, \"litigious_percent\": -0.3532670537117648, \"superfluous_percent\": 0.336000455407011, \"constraining_percent\": -0.46637381858585364, \"uncertainty_percent\": -0.1925271922776764, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"close\": 0.00508492057988305, \"positive_percent\": -0.4438025851521987, \"negative_percent\": 0.6269874971944394, \"litigious_percent\": -0.3985293081896588, \"superfluous_percent\": -0.08493541895052725, \"constraining_percent\": 0.08778110839592579, \"uncertainty_percent\": -0.3929179359722594, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"close\": -0.07156710535156652, \"positive_percent\": 0.3771426724666145, \"negative_percent\": -0.3500308580987487, \"litigious_percent\": 0.4335098064329245, \"superfluous_percent\": -0.8950567629852274, \"constraining_percent\": -0.7017562487515352, \"uncertainty_percent\": 0.2851801409646328, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"close\": -0.05197185060217317, \"positive_percent\": 0.20108512931263212, \"negative_percent\": -0.8188501716731507, \"litigious_percent\": 2.0974235739851985, \"superfluous_percent\": -0.35442653414493963, \"constraining_percent\": 0.29162671858117833, \"uncertainty_percent\": 0.6743165919824023, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"close\": 0.2534835910795434, \"positive_percent\": 1.2238809327582183, \"negative_percent\": -0.7000663022721972, \"litigious_percent\": -0.07398646870944633, \"superfluous_percent\": 0.6381769118653743, \"constraining_percent\": 0.431513080102912, \"uncertainty_percent\": -1.0611520539018309, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"close\": 1.6078614928758344, \"positive_percent\": 0.3504724513825006, \"negative_percent\": -0.43687942649011147, \"litigious_percent\": -0.11451120896677974, \"superfluous_percent\": 0.08312666001396807, \"constraining_percent\": -0.16120002405870087, \"uncertainty_percent\": 0.3713686161107828, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"close\": 2.6406466843732623, \"positive_percent\": -1.47077888225426, \"negative_percent\": 2.5404862330242852, \"litigious_percent\": -0.6243254909294675, \"superfluous_percent\": -0.7714034088747557, \"constraining_percent\": -0.5859443473108152, \"uncertainty_percent\": -2.4032574232696384, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"close\": 0.8113720204152075, \"positive_percent\": -2.132626323885716, \"negative_percent\": 3.1421634926519224, \"litigious_percent\": -1.5432353353288792, \"superfluous_percent\": -0.3946115960899595, \"constraining_percent\": -0.2936940972418736, \"uncertainty_percent\": -2.255652617076424, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"close\": 0.8194406547237804, \"positive_percent\": -2.1463728329382894, \"negative_percent\": 2.1973332773545855, \"litigious_percent\": -0.2718503868824127, \"superfluous_percent\": 1.256856452974408, \"constraining_percent\": 0.09543800986187877, \"uncertainty_percent\": -1.186602145103405, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"close\": 0.6782395543237422, \"positive_percent\": -1.271260493845782, \"negative_percent\": 1.6353264393179872, \"litigious_percent\": -1.6310467448207555, \"superfluous_percent\": 1.4260158142248975, \"constraining_percent\": -0.34508535462821743, \"uncertainty_percent\": -1.0117540279340227, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"close\": 0.7254986981311017, \"positive_percent\": -0.5640545332911348, \"negative_percent\": 0.6864022087652758, \"litigious_percent\": 0.22205267792730407, \"superfluous_percent\": 0.4483596274255952, \"constraining_percent\": -0.9289465162007994, \"uncertainty_percent\": -0.5969616562364489, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"close\": 1.054871877227519, \"positive_percent\": -1.112183444168155, \"negative_percent\": 0.7216295739143861, \"litigious_percent\": -0.10493028170856454, \"superfluous_percent\": 0.8970582332185704, \"constraining_percent\": 0.08656045252214441, \"uncertainty_percent\": 0.2626826547565435, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"close\": 0.7903359381107113, \"positive_percent\": 0.24351222734497038, \"negative_percent\": -0.6974162159868128, \"litigious_percent\": 0.84426128794556, \"superfluous_percent\": 0.492014825214196, \"constraining_percent\": 0.3731895316177118, \"uncertainty_percent\": 0.5564095332129168, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"close\": 0.5364621229016618, \"positive_percent\": -0.4321555393091087, \"negative_percent\": 0.20377305039070728, \"litigious_percent\": -0.7883584869898351, \"superfluous_percent\": 1.4542844188246105, \"constraining_percent\": 0.41097706503840703, \"uncertainty_percent\": 0.1796624880095898, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"close\": 0.6678655959270042, \"positive_percent\": 0.528783466705642, \"negative_percent\": -0.5810146383548227, \"litigious_percent\": -1.0034030963959473, \"superfluous_percent\": -1.2167854726041645, \"constraining_percent\": -0.02333419570595225, \"uncertainty_percent\": 1.1704299889006406, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"close\": 0.703742202049055, \"positive_percent\": 0.3733829548206085, \"negative_percent\": -0.7313193448335582, \"litigious_percent\": 2.1470472480819836, \"superfluous_percent\": 0.4398926429761296, \"constraining_percent\": 1.023467304549684, \"uncertainty_percent\": -0.2813493897608828, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"close\": 0.5053402477114497, \"positive_percent\": 1.0348598412402845, \"negative_percent\": -0.22899581302546118, \"litigious_percent\": -0.4258603718243554, \"superfluous_percent\": -0.20468236221642205, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.1069625473425797, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"close\": 1.2934729203524835, \"positive_percent\": -0.26989904092421, \"negative_percent\": -0.6224015453177404, \"litigious_percent\": 1.2143897160207877, \"superfluous_percent\": 0.40690745846421444, \"constraining_percent\": -0.03774446600416683, \"uncertainty_percent\": 1.3386310626569353, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"close\": 1.1240315998724353, \"positive_percent\": -0.19594161726960954, \"negative_percent\": -0.6198584239860975, \"litigious_percent\": 1.551238900408911, \"superfluous_percent\": 0.41054904801385983, \"constraining_percent\": 0.56900889782834, \"uncertainty_percent\": 0.942905265015268, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"close\": 1.0851292558846706, \"positive_percent\": 0.5626789560928337, \"negative_percent\": -0.41013980210739015, \"litigious_percent\": 0.05307028161191413, \"superfluous_percent\": -2.5023653547520164, \"constraining_percent\": -0.14698772758705336, \"uncertainty_percent\": 0.6892568428270232, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"close\": 1.0819594352634447, \"positive_percent\": 0.4596591701484616, \"negative_percent\": -0.63949633601385, \"litigious_percent\": 0.550807400620481, \"superfluous_percent\": -0.3636915473010804, \"constraining_percent\": -0.6448758439474906, \"uncertainty_percent\": 0.5594822706573539, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"close\": 1.1796475434993896, \"positive_percent\": -0.25186379605677556, \"negative_percent\": -0.3601054278959803, \"litigious_percent\": 0.18301909705014627, \"superfluous_percent\": -0.30773771197479366, \"constraining_percent\": 0.0025799586930226877, \"uncertainty_percent\": 1.3793963859698544, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"close\": 0.7609430559866222, \"positive_percent\": 0.05896592925331201, \"negative_percent\": -1.089046414016831, \"litigious_percent\": 2.8530580452863687, \"superfluous_percent\": 0.26730439668783756, \"constraining_percent\": 0.690472611068451, \"uncertainty_percent\": 0.9902944465333682, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"close\": 0.9182814250038077, \"positive_percent\": 0.22822090709295745, \"negative_percent\": -0.8468518016737706, \"litigious_percent\": 1.0928787375478275, \"superfluous_percent\": -0.08913738906012825, \"constraining_percent\": -0.09768655017761382, \"uncertainty_percent\": 1.0982338030799368, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"close\": 0.3967018500567256, \"positive_percent\": -1.5488947702909557, \"negative_percent\": 1.3817261648955461, \"litigious_percent\": -0.6171316729596487, \"superfluous_percent\": 0.9447869082697296, \"constraining_percent\": 0.20437882631204116, \"uncertainty_percent\": -0.22202961758192985, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"close\": 0.19037534416605667, \"positive_percent\": -0.5088518804403341, \"negative_percent\": 0.34723132468908924, \"litigious_percent\": 0.4970402348942453, \"superfluous_percent\": -1.5301629638032883, \"constraining_percent\": -0.10657718734862125, \"uncertainty_percent\": 0.5238238304243745, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"close\": 0.26414571498730155, \"positive_percent\": 0.6186196210676993, \"negative_percent\": -0.042071664442161885, \"litigious_percent\": -1.4151252431026464, \"superfluous_percent\": -0.25791836712872923, \"constraining_percent\": -0.45962028904551205, \"uncertainty_percent\": -0.36135460940367536, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"close\": -0.22544748823650693, \"positive_percent\": -0.9324885057762341, \"negative_percent\": 0.3709554594506877, \"litigious_percent\": 0.3847062104238857, \"superfluous_percent\": 1.759849036817153, \"constraining_percent\": 0.6698184730385445, \"uncertainty_percent\": 0.12901107482245153, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"close\": -0.5075615235255639, \"positive_percent\": -1.058566832258698, \"negative_percent\": 1.0178242044146923, \"litigious_percent\": -0.07612337586183869, \"superfluous_percent\": -0.569564011450709, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.1342862461090579, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"close\": -1.2314332872090286, \"positive_percent\": -0.4434689530807786, \"negative_percent\": 0.35998998331857646, \"litigious_percent\": -0.5108033086957388, \"superfluous_percent\": -0.3313338325813071, \"constraining_percent\": -0.26631111703685273, \"uncertainty_percent\": 0.42269869076277483, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"close\": -1.2431039904053582, \"positive_percent\": 0.10526319170484486, \"negative_percent\": 0.07028299011020143, \"litigious_percent\": 0.3240477169473289, \"superfluous_percent\": -1.166559690182187, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.053981522419945346, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"close\": -0.9510482449860937, \"positive_percent\": -1.7635584100777033, \"negative_percent\": 0.35541625055573844, \"litigious_percent\": -0.03561711361759298, \"superfluous_percent\": -0.25461353526953495, \"constraining_percent\": 1.2272875859332686, \"uncertainty_percent\": 2.629480910617308, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"close\": -0.6778673405386719, \"positive_percent\": 0.4277219416554931, \"negative_percent\": -0.4152296124177505, \"litigious_percent\": 1.1563733348033982, \"superfluous_percent\": 0.338288829582542, \"constraining_percent\": 0.8389107742299865, \"uncertainty_percent\": -0.6346034861830764, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"close\": -0.9588287137836472, \"positive_percent\": -0.7727302009757318, \"negative_percent\": 0.6270550399473346, \"litigious_percent\": 0.8792515972726556, \"superfluous_percent\": -2.3945800703995297, \"constraining_percent\": 0.5557474852865275, \"uncertainty_percent\": 0.4224095163585772, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"close\": -0.8844820119403619, \"positive_percent\": -0.2076662487750836, \"negative_percent\": -0.34523319112584494, \"litigious_percent\": 0.10352304143608938, \"superfluous_percent\": -0.016176451606952285, \"constraining_percent\": 0.11407501673294108, \"uncertainty_percent\": 1.1743310083141587, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"close\": -0.5427177158700633, \"positive_percent\": -0.463836104772548, \"negative_percent\": 0.006559541918229539, \"litigious_percent\": -0.11149000995219245, \"superfluous_percent\": 0.24249748659480447, \"constraining_percent\": 0.48210608801664484, \"uncertainty_percent\": 0.8121921068323511, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"close\": -0.5447348744472066, \"positive_percent\": -1.0342373427643439, \"negative_percent\": 0.4891000336212831, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": -1.3000280983130097, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 1.7942851198466558, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"close\": -0.5167828198782193, \"positive_percent\": 0.5001161783800562, \"negative_percent\": 0.21186870332243668, \"litigious_percent\": -0.5624644282342224, \"superfluous_percent\": -1.4358501133319677, \"constraining_percent\": -0.42881808611644145, \"uncertainty_percent\": -0.7013209528280824, \"lead_movement\": 0.978945010372561}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"close\": -0.5118840061908714, \"positive_percent\": 0.5754542864836891, \"negative_percent\": -0.3883400485139699, \"litigious_percent\": -1.5705912618206086, \"superfluous_percent\": 0.541050825609219, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.44512268860175513, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"close\": -0.6507797825027462, \"positive_percent\": 0.12831772280367976, \"negative_percent\": 0.3746513272558152, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": 1.8561071998393825, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.3537605530581107, \"lead_movement\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"close\": -0.8052364964097278, \"positive_percent\": 2.7677257880215986, \"negative_percent\": -2.6587949676735683, \"litigious_percent\": -0.230676395881147, \"superfluous_percent\": 2.417878854850327, \"constraining_percent\": 5.497619306571862, \"uncertainty_percent\": -0.8429126421983911, \"lead_movement\": null}], \"data-053772705c2387e0addddb774cbbd457\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"close\": -2.1124993371541687, \"positive_percent\": 1.3080074080347925, \"negative_percent\": -1.3377674224535485, \"litigious_percent\": 1.4224339191569986, \"superfluous_percent\": 0.038526592184344816, \"constraining_percent\": -0.19412900796853524, \"uncertainty_percent\": -0.09173455440168682}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"close\": -1.6962442564850746, \"positive_percent\": 1.757874554956677, \"negative_percent\": -0.5216755391242294, \"litigious_percent\": -1.8460228541959132, \"superfluous_percent\": -0.7899577108557307, \"constraining_percent\": 0.38320836426299093, \"uncertainty_percent\": -1.274999743955868}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"close\": -1.1709185298947262, \"positive_percent\": 0.4238166692356861, \"negative_percent\": 0.14796548373001014, \"litigious_percent\": -1.1411445492460637, \"superfluous_percent\": 0.7964385852423237, \"constraining_percent\": -0.5168124977691091, \"uncertainty_percent\": -0.8910043568340144}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"close\": -1.8086288057830648, \"positive_percent\": 0.5290533223282163, \"negative_percent\": 0.19380077710283605, \"litigious_percent\": -1.008149542028977, \"superfluous_percent\": 0.662011199653975, \"constraining_percent\": 0.03539342760224727, \"uncertainty_percent\": -1.3060307500659571}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"close\": -1.448998248029496, \"positive_percent\": 1.5537530768171326, \"negative_percent\": -1.1631091435070435, \"litigious_percent\": -0.339223782573124, \"superfluous_percent\": 0.21802355516073602, \"constraining_percent\": -0.25807603149082353, \"uncertainty_percent\": -0.268997739211543}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"close\": -1.301457506387007, \"positive_percent\": 0.9501277638386724, \"negative_percent\": -0.20334339584616914, \"litigious_percent\": -0.40281961155035795, \"superfluous_percent\": -0.9557344445572733, \"constraining_percent\": -0.31723997349610533, \"uncertainty_percent\": -0.8791808033739744}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"close\": -0.24821256360712518, \"positive_percent\": 0.5398517281675337, \"negative_percent\": -0.6081171779828584, \"litigious_percent\": 0.3021601506744932, \"superfluous_percent\": -0.18469317068097052, \"constraining_percent\": -0.0009613596291690321, \"uncertainty_percent\": 0.2771939921847942}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"close\": 0.06747275371581918, \"positive_percent\": 1.1968904461928098, \"negative_percent\": -0.8923743721124068, \"litigious_percent\": -0.3532670537117648, \"superfluous_percent\": 0.336000455407011, \"constraining_percent\": -0.46637381858585364, \"uncertainty_percent\": -0.1925271922776764}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"close\": 0.00508492057988305, \"positive_percent\": -0.4438025851521987, \"negative_percent\": 0.6269874971944394, \"litigious_percent\": -0.3985293081896588, \"superfluous_percent\": -0.08493541895052725, \"constraining_percent\": 0.08778110839592579, \"uncertainty_percent\": -0.3929179359722594}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"close\": -0.07156710535156652, \"positive_percent\": 0.3771426724666145, \"negative_percent\": -0.3500308580987487, \"litigious_percent\": 0.4335098064329245, \"superfluous_percent\": -0.8950567629852274, \"constraining_percent\": -0.7017562487515352, \"uncertainty_percent\": 0.2851801409646328}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"close\": -0.05197185060217317, \"positive_percent\": 0.20108512931263212, \"negative_percent\": -0.8188501716731507, \"litigious_percent\": 2.0974235739851985, \"superfluous_percent\": -0.35442653414493963, \"constraining_percent\": 0.29162671858117833, \"uncertainty_percent\": 0.6743165919824023}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"close\": 0.2534835910795434, \"positive_percent\": 1.2238809327582183, \"negative_percent\": -0.7000663022721972, \"litigious_percent\": -0.07398646870944633, \"superfluous_percent\": 0.6381769118653743, \"constraining_percent\": 0.431513080102912, \"uncertainty_percent\": -1.0611520539018309}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"close\": 1.6078614928758344, \"positive_percent\": 0.3504724513825006, \"negative_percent\": -0.43687942649011147, \"litigious_percent\": -0.11451120896677974, \"superfluous_percent\": 0.08312666001396807, \"constraining_percent\": -0.16120002405870087, \"uncertainty_percent\": 0.3713686161107828}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"close\": 2.6406466843732623, \"positive_percent\": -1.47077888225426, \"negative_percent\": 2.5404862330242852, \"litigious_percent\": -0.6243254909294675, \"superfluous_percent\": -0.7714034088747557, \"constraining_percent\": -0.5859443473108152, \"uncertainty_percent\": -2.4032574232696384}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"close\": 0.8113720204152075, \"positive_percent\": -2.132626323885716, \"negative_percent\": 3.1421634926519224, \"litigious_percent\": -1.5432353353288792, \"superfluous_percent\": -0.3946115960899595, \"constraining_percent\": -0.2936940972418736, \"uncertainty_percent\": -2.255652617076424}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"close\": 0.8194406547237804, \"positive_percent\": -2.1463728329382894, \"negative_percent\": 2.1973332773545855, \"litigious_percent\": -0.2718503868824127, \"superfluous_percent\": 1.256856452974408, \"constraining_percent\": 0.09543800986187877, \"uncertainty_percent\": -1.186602145103405}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"close\": 0.6782395543237422, \"positive_percent\": -1.271260493845782, \"negative_percent\": 1.6353264393179872, \"litigious_percent\": -1.6310467448207555, \"superfluous_percent\": 1.4260158142248975, \"constraining_percent\": -0.34508535462821743, \"uncertainty_percent\": -1.0117540279340227}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"close\": 0.7254986981311017, \"positive_percent\": -0.5640545332911348, \"negative_percent\": 0.6864022087652758, \"litigious_percent\": 0.22205267792730407, \"superfluous_percent\": 0.4483596274255952, \"constraining_percent\": -0.9289465162007994, \"uncertainty_percent\": -0.5969616562364489}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"close\": 1.054871877227519, \"positive_percent\": -1.112183444168155, \"negative_percent\": 0.7216295739143861, \"litigious_percent\": -0.10493028170856454, \"superfluous_percent\": 0.8970582332185704, \"constraining_percent\": 0.08656045252214441, \"uncertainty_percent\": 0.2626826547565435}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"close\": 0.7903359381107113, \"positive_percent\": 0.24351222734497038, \"negative_percent\": -0.6974162159868128, \"litigious_percent\": 0.84426128794556, \"superfluous_percent\": 0.492014825214196, \"constraining_percent\": 0.3731895316177118, \"uncertainty_percent\": 0.5564095332129168}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"close\": 0.5364621229016618, \"positive_percent\": -0.4321555393091087, \"negative_percent\": 0.20377305039070728, \"litigious_percent\": -0.7883584869898351, \"superfluous_percent\": 1.4542844188246105, \"constraining_percent\": 0.41097706503840703, \"uncertainty_percent\": 0.1796624880095898}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"close\": 0.6678655959270042, \"positive_percent\": 0.528783466705642, \"negative_percent\": -0.5810146383548227, \"litigious_percent\": -1.0034030963959473, \"superfluous_percent\": -1.2167854726041645, \"constraining_percent\": -0.02333419570595225, \"uncertainty_percent\": 1.1704299889006406}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"close\": 0.703742202049055, \"positive_percent\": 0.3733829548206085, \"negative_percent\": -0.7313193448335582, \"litigious_percent\": 2.1470472480819836, \"superfluous_percent\": 0.4398926429761296, \"constraining_percent\": 1.023467304549684, \"uncertainty_percent\": -0.2813493897608828}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"close\": 0.5053402477114497, \"positive_percent\": 1.0348598412402845, \"negative_percent\": -0.22899581302546118, \"litigious_percent\": -0.4258603718243554, \"superfluous_percent\": -0.20468236221642205, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.1069625473425797}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"close\": 1.2934729203524835, \"positive_percent\": -0.26989904092421, \"negative_percent\": -0.6224015453177404, \"litigious_percent\": 1.2143897160207877, \"superfluous_percent\": 0.40690745846421444, \"constraining_percent\": -0.03774446600416683, \"uncertainty_percent\": 1.3386310626569353}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"close\": 1.1240315998724353, \"positive_percent\": -0.19594161726960954, \"negative_percent\": -0.6198584239860975, \"litigious_percent\": 1.551238900408911, \"superfluous_percent\": 0.41054904801385983, \"constraining_percent\": 0.56900889782834, \"uncertainty_percent\": 0.942905265015268}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"close\": 1.0851292558846706, \"positive_percent\": 0.5626789560928337, \"negative_percent\": -0.41013980210739015, \"litigious_percent\": 0.05307028161191413, \"superfluous_percent\": -2.5023653547520164, \"constraining_percent\": -0.14698772758705336, \"uncertainty_percent\": 0.6892568428270232}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"close\": 1.0819594352634447, \"positive_percent\": 0.4596591701484616, \"negative_percent\": -0.63949633601385, \"litigious_percent\": 0.550807400620481, \"superfluous_percent\": -0.3636915473010804, \"constraining_percent\": -0.6448758439474906, \"uncertainty_percent\": 0.5594822706573539}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"close\": 1.1796475434993896, \"positive_percent\": -0.25186379605677556, \"negative_percent\": -0.3601054278959803, \"litigious_percent\": 0.18301909705014627, \"superfluous_percent\": -0.30773771197479366, \"constraining_percent\": 0.0025799586930226877, \"uncertainty_percent\": 1.3793963859698544}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"close\": 0.7609430559866222, \"positive_percent\": 0.05896592925331201, \"negative_percent\": -1.089046414016831, \"litigious_percent\": 2.8530580452863687, \"superfluous_percent\": 0.26730439668783756, \"constraining_percent\": 0.690472611068451, \"uncertainty_percent\": 0.9902944465333682}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"close\": 0.9182814250038077, \"positive_percent\": 0.22822090709295745, \"negative_percent\": -0.8468518016737706, \"litigious_percent\": 1.0928787375478275, \"superfluous_percent\": -0.08913738906012825, \"constraining_percent\": -0.09768655017761382, \"uncertainty_percent\": 1.0982338030799368}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"close\": 0.3967018500567256, \"positive_percent\": -1.5488947702909557, \"negative_percent\": 1.3817261648955461, \"litigious_percent\": -0.6171316729596487, \"superfluous_percent\": 0.9447869082697296, \"constraining_percent\": 0.20437882631204116, \"uncertainty_percent\": -0.22202961758192985}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"close\": 0.19037534416605667, \"positive_percent\": -0.5088518804403341, \"negative_percent\": 0.34723132468908924, \"litigious_percent\": 0.4970402348942453, \"superfluous_percent\": -1.5301629638032883, \"constraining_percent\": -0.10657718734862125, \"uncertainty_percent\": 0.5238238304243745}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"close\": 0.26414571498730155, \"positive_percent\": 0.6186196210676993, \"negative_percent\": -0.042071664442161885, \"litigious_percent\": -1.4151252431026464, \"superfluous_percent\": -0.25791836712872923, \"constraining_percent\": -0.45962028904551205, \"uncertainty_percent\": -0.36135460940367536}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"close\": -0.22544748823650693, \"positive_percent\": -0.9324885057762341, \"negative_percent\": 0.3709554594506877, \"litigious_percent\": 0.3847062104238857, \"superfluous_percent\": 1.759849036817153, \"constraining_percent\": 0.6698184730385445, \"uncertainty_percent\": 0.12901107482245153}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"close\": -0.5075615235255639, \"positive_percent\": -1.058566832258698, \"negative_percent\": 1.0178242044146923, \"litigious_percent\": -0.07612337586183869, \"superfluous_percent\": -0.569564011450709, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.1342862461090579}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"close\": -1.2314332872090286, \"positive_percent\": -0.4434689530807786, \"negative_percent\": 0.35998998331857646, \"litigious_percent\": -0.5108033086957388, \"superfluous_percent\": -0.3313338325813071, \"constraining_percent\": -0.26631111703685273, \"uncertainty_percent\": 0.42269869076277483}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"close\": -1.2431039904053582, \"positive_percent\": 0.10526319170484486, \"negative_percent\": 0.07028299011020143, \"litigious_percent\": 0.3240477169473289, \"superfluous_percent\": -1.166559690182187, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.053981522419945346}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"close\": -0.9510482449860937, \"positive_percent\": -1.7635584100777033, \"negative_percent\": 0.35541625055573844, \"litigious_percent\": -0.03561711361759298, \"superfluous_percent\": -0.25461353526953495, \"constraining_percent\": 1.2272875859332686, \"uncertainty_percent\": 2.629480910617308}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"close\": -0.6778673405386719, \"positive_percent\": 0.4277219416554931, \"negative_percent\": -0.4152296124177505, \"litigious_percent\": 1.1563733348033982, \"superfluous_percent\": 0.338288829582542, \"constraining_percent\": 0.8389107742299865, \"uncertainty_percent\": -0.6346034861830764}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"close\": -0.9588287137836472, \"positive_percent\": -0.7727302009757318, \"negative_percent\": 0.6270550399473346, \"litigious_percent\": 0.8792515972726556, \"superfluous_percent\": -2.3945800703995297, \"constraining_percent\": 0.5557474852865275, \"uncertainty_percent\": 0.4224095163585772}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"close\": -0.8844820119403619, \"positive_percent\": -0.2076662487750836, \"negative_percent\": -0.34523319112584494, \"litigious_percent\": 0.10352304143608938, \"superfluous_percent\": -0.016176451606952285, \"constraining_percent\": 0.11407501673294108, \"uncertainty_percent\": 1.1743310083141587}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"close\": -0.5427177158700633, \"positive_percent\": -0.463836104772548, \"negative_percent\": 0.006559541918229539, \"litigious_percent\": -0.11149000995219245, \"superfluous_percent\": 0.24249748659480447, \"constraining_percent\": 0.48210608801664484, \"uncertainty_percent\": 0.8121921068323511}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"close\": -0.5447348744472066, \"positive_percent\": -1.0342373427643439, \"negative_percent\": 0.4891000336212831, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": -1.3000280983130097, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 1.7942851198466558}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"close\": -0.5167828198782193, \"positive_percent\": 0.5001161783800562, \"negative_percent\": 0.21186870332243668, \"litigious_percent\": -0.5624644282342224, \"superfluous_percent\": -1.4358501133319677, \"constraining_percent\": -0.42881808611644145, \"uncertainty_percent\": -0.7013209528280824}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"close\": -0.5118840061908714, \"positive_percent\": 0.5754542864836891, \"negative_percent\": -0.3883400485139699, \"litigious_percent\": -1.5705912618206086, \"superfluous_percent\": 0.541050825609219, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": 0.44512268860175513}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"close\": -0.6507797825027462, \"positive_percent\": 0.12831772280367976, \"negative_percent\": 0.3746513272558152, \"litigious_percent\": -0.5558027971752816, \"superfluous_percent\": 1.8561071998393825, \"constraining_percent\": -1.1814975576909117, \"uncertainty_percent\": -1.3537605530581107}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"close\": -0.8052364964097278, \"positive_percent\": 2.7677257880215986, \"negative_percent\": -2.6587949676735683, \"litigious_percent\": -0.230676395881147, \"superfluous_percent\": 2.417878854850327, \"constraining_percent\": 5.497619306571862, \"uncertainty_percent\": -0.8429126421983911}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.VConcatChart(...)"
      ]
     },
     "execution_count": 44,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "\n",
    "## sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,4,7,8,9,10,11,12,13]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "\n",
    "#constraining\n",
    "constraining = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('constraining_percent:Q'),\n",
    "    color=alt.value('#feb24c')\n",
    ")\n",
    "\n",
    "#uncertainty\n",
    "uncertainty = alt.Chart(df).mark_line(point=False, strokeWidth=1).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('uncertainty_percent:Q'),\n",
    "    color=alt.value('#de2d26')\n",
    ")\n",
    "\n",
    "#lead movement\n",
    "leadmovement = alt.Chart(df).mark_line(point=False, strokeWidth=3).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('lead_movement:Q'),\n",
    "    color=alt.value('#636363')\n",
    ")\n",
    "\n",
    "\n",
    "\n",
    "lower =alt.layer(uncertainty, positive, negative, leadmovement)\n",
    "\n",
    "alt.vconcat(lower)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-b2531de08eb6486487473d89b4edb43c\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-b2531de08eb6486487473d89b4edb43c\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-b2531de08eb6486487473d89b4edb43c\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-ff8348e7c0856dc6852171938d9366b7\"}, \"mark\": {\"type\": \"line\", \"strokeWidth\": 3}, \"encoding\": {\"color\": {\"type\": \"nominal\", \"field\": \"Variables\", \"scale\": {\"domain\": [\"lead_movement\", \"positive_percent\", \"negative_percent\"], \"range\": [\"black\", \"green\", \"red\"]}}, \"strokeDash\": {\"type\": \"nominal\", \"field\": \"Variables\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"Values\"}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-ff8348e7c0856dc6852171938d9366b7\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.3080074080347925}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.757874554956677}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4238166692356861}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5290533223282163}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.5537530768171326}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.9501277638386724}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5398517281675337}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.1968904461928098}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4438025851521987}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3771426724666145}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.20108512931263212}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.2238809327582183}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3504724513825006}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.47077888225426}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.132626323885716}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.1463728329382894}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.271260493845782}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5640545332911348}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.112183444168155}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.24351222734497038}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4321555393091087}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.528783466705642}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3733829548206085}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.0348598412402845}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.26989904092421}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.19594161726960954}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5626789560928337}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4596591701484616}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.25186379605677556}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.05896592925331201}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.22822090709295745}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.5488947702909557}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5088518804403341}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.6186196210676993}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.9324885057762341}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.058566832258698}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4434689530807786}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.10526319170484486}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.7635584100777033}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4277219416554931}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.7727302009757318}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.2076662487750836}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.463836104772548}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.0342373427643439}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5001161783800562}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5754542864836891}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.12831772280367976}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 2.7677257880215986}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.3377674224535485}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5216755391242294}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.14796548373001014}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.19380077710283605}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.1631091435070435}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.20334339584616914}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6081171779828584}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8923743721124068}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6269874971944394}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3500308580987487}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8188501716731507}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7000663022721972}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.43687942649011147}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.5404862330242852}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 3.1421634926519224}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.1973332773545855}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.6353264393179872}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6864022087652758}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.7216295739143861}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6974162159868128}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.20377305039070728}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5810146383548227}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7313193448335582}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.22899581302546118}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6224015453177404}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6198584239860975}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.41013980210739015}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.63949633601385}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3601054278959803}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.089046414016831}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8468518016737706}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.3817261648955461}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.34723132468908924}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.042071664442161885}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3709554594506877}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.0178242044146923}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35998998331857646}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.07028299011020143}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35541625055573844}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.4152296124177505}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6270550399473346}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.34523319112584494}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.006559541918229539}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.4891000336212831}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.21186870332243668}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3883400485139699}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3746513272558152}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -2.6587949676735683}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": 0.978945010372561}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": -1.0215078369104982}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"lead_movement\", \"Values\": null}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "## sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,7,8,13]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "\n",
    "df_melt=pd.melt(df, id_vars=['created_utc'],\n",
    "        var_name='Variables', value_name='Values')\n",
    "\n",
    "alt.Chart(df_melt).mark_line(strokeWidth = 3).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('Values:Q'),\n",
    "    #color = 'Variables',\n",
    "    color=alt.Color('Variables',\n",
    "                   scale=alt.Scale(\n",
    "            domain=['lead_movement','positive_percent','negative_percent'],\n",
    "            range=['black','green', 'red'])),\n",
    "    #color= alt.Color('Variables', scale=alt.\n",
    "    #                Scale(scheme = 'dark1')),\n",
    "    strokeDash= 'Variables'\n",
    "    )\n",
    "\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "\n",
       "<div id=\"altair-viz-cb504f32f37d4458aa08840612f1d491\"></div>\n",
       "<script type=\"text/javascript\">\n",
       "  (function(spec, embedOpt){\n",
       "    let outputDiv = document.currentScript.previousElementSibling;\n",
       "    if (outputDiv.id !== \"altair-viz-cb504f32f37d4458aa08840612f1d491\") {\n",
       "      outputDiv = document.getElementById(\"altair-viz-cb504f32f37d4458aa08840612f1d491\");\n",
       "    }\n",
       "    const paths = {\n",
       "      \"vega\": \"https://cdn.jsdelivr.net/npm//vega@5?noext\",\n",
       "      \"vega-lib\": \"https://cdn.jsdelivr.net/npm//vega-lib?noext\",\n",
       "      \"vega-lite\": \"https://cdn.jsdelivr.net/npm//vega-lite@4.8.1?noext\",\n",
       "      \"vega-embed\": \"https://cdn.jsdelivr.net/npm//vega-embed@6?noext\",\n",
       "    };\n",
       "\n",
       "    function loadScript(lib) {\n",
       "      return new Promise(function(resolve, reject) {\n",
       "        var s = document.createElement('script');\n",
       "        s.src = paths[lib];\n",
       "        s.async = true;\n",
       "        s.onload = () => resolve(paths[lib]);\n",
       "        s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n",
       "        document.getElementsByTagName(\"head\")[0].appendChild(s);\n",
       "      });\n",
       "    }\n",
       "\n",
       "    function showError(err) {\n",
       "      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n",
       "      throw err;\n",
       "    }\n",
       "\n",
       "    function displayChart(vegaEmbed) {\n",
       "      vegaEmbed(outputDiv, spec, embedOpt)\n",
       "        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n",
       "    }\n",
       "\n",
       "    if(typeof define === \"function\" && define.amd) {\n",
       "      requirejs.config({paths});\n",
       "      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n",
       "    } else if (typeof vegaEmbed === \"function\") {\n",
       "      displayChart(vegaEmbed);\n",
       "    } else {\n",
       "      loadScript(\"vega\")\n",
       "        .then(() => loadScript(\"vega-lite\"))\n",
       "        .then(() => loadScript(\"vega-embed\"))\n",
       "        .catch(showError)\n",
       "        .then(() => displayChart(vegaEmbed));\n",
       "    }\n",
       "  })({\"config\": {\"view\": {\"continuousWidth\": 400, \"continuousHeight\": 300}}, \"data\": {\"name\": \"data-a807943cbfc6a16230b756ed247267c4\"}, \"mark\": {\"type\": \"line\", \"strokeWidth\": 3}, \"encoding\": {\"color\": {\"type\": \"nominal\", \"field\": \"Variables\", \"scale\": {\"domain\": [\"close\", \"positive_percent\", \"negative_percent\"], \"range\": [\"black\", \"green\", \"red\", \"purple\"]}}, \"strokeDash\": {\"type\": \"nominal\", \"field\": \"Variables\"}, \"x\": {\"type\": \"ordinal\", \"axis\": {\"format\": \"%b %d %Y %H:%M\", \"labelAngle\": -45, \"title\": \"Hours in period\"}, \"field\": \"created_utc\", \"timeUnit\": \"yearmonthdatehoursminutes\"}, \"y\": {\"type\": \"quantitative\", \"field\": \"Values\"}}, \"$schema\": \"https://vega.github.io/schema/vega-lite/v4.8.1.json\", \"datasets\": {\"data-a807943cbfc6a16230b756ed247267c4\": [{\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"close\", \"Values\": -2.1124993371541687}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"close\", \"Values\": -1.6962442564850746}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"close\", \"Values\": -1.1709185298947262}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"close\", \"Values\": -1.8086288057830648}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"close\", \"Values\": -1.448998248029496}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"close\", \"Values\": -1.301457506387007}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"close\", \"Values\": -0.24821256360712518}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.06747275371581918}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.00508492057988305}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.07156710535156652}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.05197185060217317}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.2534835910795434}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.6078614928758344}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"close\", \"Values\": 2.6406466843732623}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.8113720204152075}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"close\", \"Values\": 0.8194406547237804}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"close\", \"Values\": 0.6782395543237422}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7254986981311017}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.054871877227519}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7903359381107113}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.5364621229016618}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"close\", \"Values\": 0.6678655959270042}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"close\", \"Values\": 0.703742202049055}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.5053402477114497}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"close\", \"Values\": 1.2934729203524835}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"close\", \"Values\": 1.1240315998724353}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"close\", \"Values\": 1.0851292558846706}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"close\", \"Values\": 1.0819594352634447}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"close\", \"Values\": 1.1796475434993896}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"close\", \"Values\": 0.7609430559866222}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"close\", \"Values\": 0.9182814250038077}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"close\", \"Values\": 0.3967018500567256}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"close\", \"Values\": 0.19037534416605667}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"close\", \"Values\": 0.26414571498730155}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.22544748823650693}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5075615235255639}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"close\", \"Values\": -1.2314332872090286}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"close\", \"Values\": -1.2431039904053582}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"close\", \"Values\": -0.9510482449860937}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"close\", \"Values\": -0.6778673405386719}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.9588287137836472}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.8844820119403619}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5427177158700633}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5447348744472066}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5167828198782193}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"close\", \"Values\": -0.5118840061908714}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"close\", \"Values\": -0.6507797825027462}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"close\", \"Values\": -0.8052364964097278}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.3080074080347925}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.757874554956677}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4238166692356861}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5290533223282163}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.5537530768171326}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.9501277638386724}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5398517281675337}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.1968904461928098}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4438025851521987}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3771426724666145}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.20108512931263212}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.2238809327582183}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3504724513825006}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.47077888225426}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.132626323885716}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -2.1463728329382894}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.271260493845782}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5640545332911348}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.112183444168155}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.24351222734497038}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4321555393091087}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.528783466705642}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.3733829548206085}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 1.0348598412402845}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.26989904092421}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.19594161726960954}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5626789560928337}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4596591701484616}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.25186379605677556}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.05896592925331201}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.22822090709295745}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.5488947702909557}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.5088518804403341}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.6186196210676993}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.9324885057762341}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.058566832258698}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.4434689530807786}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.10526319170484486}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.7635584100777033}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.4277219416554931}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.7727302009757318}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.2076662487750836}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -0.463836104772548}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": -1.0342373427643439}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5001161783800562}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.5754542864836891}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 0.12831772280367976}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"positive_percent\", \"Values\": 2.7677257880215986}, {\"created_utc\": \"2021-03-08T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.3377674224535485}, {\"created_utc\": \"2021-03-08T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5216755391242294}, {\"created_utc\": \"2021-03-08T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.14796548373001014}, {\"created_utc\": \"2021-03-08T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.19380077710283605}, {\"created_utc\": \"2021-03-08T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.1631091435070435}, {\"created_utc\": \"2021-03-08T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.20334339584616914}, {\"created_utc\": \"2021-03-09T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6081171779828584}, {\"created_utc\": \"2021-03-09T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8923743721124068}, {\"created_utc\": \"2021-03-09T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6269874971944394}, {\"created_utc\": \"2021-03-09T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3500308580987487}, {\"created_utc\": \"2021-03-09T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8188501716731507}, {\"created_utc\": \"2021-03-09T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7000663022721972}, {\"created_utc\": \"2021-03-10T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.43687942649011147}, {\"created_utc\": \"2021-03-10T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.5404862330242852}, {\"created_utc\": \"2021-03-10T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 3.1421634926519224}, {\"created_utc\": \"2021-03-10T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 2.1973332773545855}, {\"created_utc\": \"2021-03-10T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.6353264393179872}, {\"created_utc\": \"2021-03-10T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6864022087652758}, {\"created_utc\": \"2021-03-11T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.7216295739143861}, {\"created_utc\": \"2021-03-11T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6974162159868128}, {\"created_utc\": \"2021-03-11T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.20377305039070728}, {\"created_utc\": \"2021-03-11T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.5810146383548227}, {\"created_utc\": \"2021-03-11T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.7313193448335582}, {\"created_utc\": \"2021-03-11T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.22899581302546118}, {\"created_utc\": \"2021-03-12T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6224015453177404}, {\"created_utc\": \"2021-03-12T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.6198584239860975}, {\"created_utc\": \"2021-03-12T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.41013980210739015}, {\"created_utc\": \"2021-03-12T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.63949633601385}, {\"created_utc\": \"2021-03-12T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3601054278959803}, {\"created_utc\": \"2021-03-12T20:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -1.089046414016831}, {\"created_utc\": \"2021-03-15T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.8468518016737706}, {\"created_utc\": \"2021-03-15T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.3817261648955461}, {\"created_utc\": \"2021-03-15T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.34723132468908924}, {\"created_utc\": \"2021-03-15T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.042071664442161885}, {\"created_utc\": \"2021-03-15T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3709554594506877}, {\"created_utc\": \"2021-03-15T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 1.0178242044146923}, {\"created_utc\": \"2021-03-16T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35998998331857646}, {\"created_utc\": \"2021-03-16T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.07028299011020143}, {\"created_utc\": \"2021-03-16T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.35541625055573844}, {\"created_utc\": \"2021-03-16T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.4152296124177505}, {\"created_utc\": \"2021-03-16T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.6270550399473346}, {\"created_utc\": \"2021-03-16T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.34523319112584494}, {\"created_utc\": \"2021-03-17T14:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.006559541918229539}, {\"created_utc\": \"2021-03-17T15:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.4891000336212831}, {\"created_utc\": \"2021-03-17T16:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.21186870332243668}, {\"created_utc\": \"2021-03-17T17:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -0.3883400485139699}, {\"created_utc\": \"2021-03-17T18:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": 0.3746513272558152}, {\"created_utc\": \"2021-03-17T19:00:00Z\", \"Variables\": \"negative_percent\", \"Values\": -2.6587949676735683}]}}, {\"mode\": \"vega-lite\"});\n",
       "</script>"
      ],
      "text/plain": [
       "alt.Chart(...)"
      ]
     },
     "execution_count": 2,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "from sklearn.preprocessing import StandardScaler\n",
    "import numpy as np\n",
    "import pandas as pd\n",
    "import warnings\n",
    "warnings.filterwarnings('ignore')\n",
    "\n",
    "\n",
    "## sentiment and close price chart\n",
    "scaler = StandardScaler()\n",
    "\n",
    "#scale data\n",
    "df = source.iloc[:, [0,4,7,8]] \n",
    "num_cols = df.columns[df.dtypes.apply(lambda c: np.issubdtype(c, np.number))]\n",
    "df[num_cols] = scaler.fit_transform(df[num_cols])\n",
    "\n",
    "\n",
    "df_melt=pd.melt(df, id_vars=['created_utc'],\n",
    "        var_name='Variables', value_name='Values')\n",
    "\n",
    "alt.Chart(df_melt).mark_line(strokeWidth = 3).encode(\n",
    "    x= alt.X('yearmonthdatehoursminutes(created_utc):O',\n",
    "             axis = alt.Axis\n",
    "                 (\n",
    "                 format= \"%b %d %Y %H:%M\",\n",
    "                 labelAngle = -45,\n",
    "                 title ='Hours in period'\n",
    "                 )\n",
    "             ),\n",
    "    y= alt.Y('Values:Q'),\n",
    "    #color = 'Variables',\n",
    "    color=alt.Color('Variables',\n",
    "                   scale=alt.Scale(\n",
    "            domain=['close','positive_percent','negative_percent'],\n",
    "            range=['black','green', 'red', 'purple'])),\n",
    "    #color= alt.Color('Variables', scale=alt.\n",
    "    #                Scale(scheme = 'dark1')),\n",
    "    strokeDash= 'Variables'\n",
    "    )\n",
    "\n",
    "\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
