---
title: "tidyqunatGetStockPrices"
author: "Rune Rathmann"
date: "28/2/2021"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



```{r}
# install.packages("tidyverse")
# install.packages("tidyquant")
library(tidyverse)
library(tidyquant)
```


We first assign the api key.
```{r}
av_api_key("JS6L6NH86R1R2V9F")
```

We then use the API key to fetch the stock data from the desired stocks based on their ticker symbol. We use the tq_get function from the tidyquant library. We specify that we want daily data. We then filter the output for the dates we are interested in.

```{r}
# Scaling is as simple as supplying multiple symbols
stock_data <- c("GME", "AMC","PLTR","BB","TSLA","APHA","TLRY","NIO","RE","RKT","AAPL") %>%
    tq_get(get = "alphavantage", av_fun = "TIME_SERIES_DAILY_ADJUSTED", outputsize = "full")

stock_data <- filter(stock_data, between(timestamp, as.Date('2021-03-08'), as.Date('2021-03-21')))
```

We find that the stock data contains the ticker symbol, the timestamp (date and hour), the open price, the high price for the day, the low price for the day, the close price, and the volume traded as well as some insigficant parameters which will be excluded in the cleaning process most likely..

Once we have obtained the stock data, we want to classify the hour stock change as either going Up or Down in the hour. We simply do this by classifying the stocks as either up or down based on the difference between open and close price.

```{r}
stock_change <- ifelse((cbind(stock_data$open-stock_data$close))>0,"Down","Up")

stock_data2 <- cbind(stock_data,stock_change)

write.csv(stock_data2,  "C:/Users/runer/OneDrive/Dokumenter/MSc/8th Semester/Data Science Project/WSB Project/PredictStockusingRedditandTwitter/PredictStockusingRedditandTwitter/DataCollection/RawData/stockDataRaw.csv")
```


